{"version":3,"sources":["webpack://TDLib/webpack/universalModuleDefinition","webpack://TDLib/webpack/bootstrap","webpack://TDLib/(webpack)/buildin/global.js","webpack://TDLib/./src/TDLib.js","webpack://TDLib/./src/actions/Action.js","webpack://TDLib/./src/actions/examine/Examine.js","webpack://TDLib/./src/actions/face-to/FaceTo.js","webpack://TDLib/./src/actions/face-to/Settings.js","webpack://TDLib/./src/actions/idle/Idle.js","webpack://TDLib/./src/actions/index.js","webpack://TDLib/./src/actions/interact/Interact.js","webpack://TDLib/./src/actions/observe/Observe.js","webpack://TDLib/./src/actions/run-to/RunTo.js","webpack://TDLib/./src/actions/run-to/Settings.js","webpack://TDLib/./src/actions/walk-to/Settings.js","webpack://TDLib/./src/actions/walk-to/WalkTo.js","webpack://TDLib/./src/behaviours/Behaviour.js","webpack://TDLib/./src/behaviours/const.js","webpack://TDLib/./src/behaviours/examinable/Examinable.js","webpack://TDLib/./src/behaviours/index.js","webpack://TDLib/./src/behaviours/interactive/Interactive.js","webpack://TDLib/./src/behaviours/inventory/Inventory.js","webpack://TDLib/./src/behaviours/observable/Observable.js","webpack://TDLib/./src/behaviours/observable/Settings.js","webpack://TDLib/./src/boot/DebugHeader.js","webpack://TDLib/./src/boot/Game.js","webpack://TDLib/./src/boot/Settings.js","webpack://TDLib/./src/components/ActionComponent.js","webpack://TDLib/./src/components/BehaviourComponent.js","webpack://TDLib/./src/components/Component.js","webpack://TDLib/./src/components/index.js","webpack://TDLib/./src/const.js","webpack://TDLib/./src/managers/Manager.js","webpack://TDLib/./src/managers/index.js","webpack://TDLib/./src/managers/layers/LayerManager.js","webpack://TDLib/./src/managers/layers/Settings.js","webpack://TDLib/./src/managers/light-sources/LightSourceManager.js","webpack://TDLib/./src/managers/updates/UpdateManager.js","webpack://TDLib/./src/rooms/Room.js","webpack://TDLib/./src/rooms/Utils.js","webpack://TDLib/./src/rooms/index.js","webpack://TDLib/./src/sprites/Sprite.js","webpack://TDLib/./src/sprites/characters/Character.js","webpack://TDLib/./src/sprites/characters/index.js","webpack://TDLib/./src/sprites/characters/npc-characters/NPCharacter.js","webpack://TDLib/./src/sprites/characters/players/Player.js","webpack://TDLib/./src/sprites/index.js","webpack://TDLib/./src/sprites/inventory-items/InventoryItem.js","webpack://TDLib/./src/sprites/inventory-items/index.js","webpack://TDLib/./src/sprites/world-items/WorldItem.js","webpack://TDLib/./src/sprites/world-items/index.js","webpack://TDLib/./src/sprites/world-items/light-sources/LightSource.js","webpack://TDLib/./src/sprites/world-items/light-sources/index.js","webpack://TDLib/./src/sprites/world-items/room-furnitures/RoomFurniture.js","webpack://TDLib/./src/sprites/world-items/room-furnitures/index.js","webpack://TDLib/./src/sprites/world-items/wall-furnitures/WallFurniture.js","webpack://TDLib/./src/sprites/world-items/wall-furnitures/index.js","webpack://TDLib/./src/systems/cursors/CursorSystem.js","webpack://TDLib/./src/systems/index.js","webpack://TDLib/./src/systems/rooms/RoomSystem.js","webpack://TDLib/./src/utils/Utils.js","webpack://TDLib/./src/utils/index.js"],"names":["TDLib","Actions","require","Behaviours","Components","Game","Managers","Rooms","Sprites","Systems","Utils","Phaser","Objects","Extend","module","exports","global","Action","invoker","actor","config","name","constructor","target","_queue","isPaused","actions","Array","isArray","forEach","action","push","length","abort","start","finish","shift","remove","pause","resume","update","startCallback","finishCallback","updateCallback","resumeCallback","pauseCallback","Examine","arguments","addActions","behaviour","examine","getAction","FaceTo","BaseAction","Math","abs","x","MICRO_MOVEMENT_RADIUS","facing","RIGHT","LEFT","setFlipX","Settings","Idle","body","setVelocity","anims","play","Interact","Observe","RunTo","WalkTo","interact","observe","RUN_VELOCITY","console","log","velocity","WALK_VELOCITY","Behaviour","component","cursors","gameObject","room","add","pixelPerfect","setInteractive","alphaTolerance","draggable","value","lightSources","calculateLightsContribuitePoint","CONST","EXAMINABLE","INERT","INTERACTIVE","TALKABLE","INVENTORY","DEFAULT_MIN_LIGHT_LEVEL_TO_OBSERVE","DEFAULT_OBSERVE_TEXT","DEFAULT_NO_LIGHT_OBSERVE_TEXT","DEFAULT_MIN_LIGHT_LEVEL_TO_EXAMINE_OR_INTERACT","DEFAULT_EXAMINE_OR_INTERACT_TEXT","DEFAULT_NO_LIGHT_EXAMINE_OR_INTERACT_TEXT","Examinable","checkLight","minLightLevelToExamineOrInteract","examineOrInteractText","noLightExamineOrInteractText","Interactive","Observable","Talkable","Inventory","_timer","on","pointer","setCursor","time","addEvent","delay","DEFAULT_MIN_TIME_TO_OBSERVE","callback","player","isBlocked","callbackScope","bind","minLightLevelToObserve","observeText","noLightObserveText","DebugHeader","game","bannerBackgroundColor","bannerTextColor","hidePhaser","renderType","audioConfig","audio","deviceAudio","device","audioType","webAudio","disableWebAudio","noAudio","audioData","browser","ie","c","args","lastColor","color","concat","gameTitle","gameVersion","VERSION","PHASER_VERSION","DEVICE","gameURL","apply","_setScreenConfig","_setPhysicsConfig","_setPlugins","_setBoot","_setHeaderProps","_finalizeConfig","GAME","SCREEN_PROPS","getScreenProps","width","calculatedWidth","height","calculatedHeight","zoom","calculatedZoom","autoResize","backgroundColor","pixelArt","physics","default","arcade","debug","gravity","y","plugins","key","plugin","RoomSystem","mapping","CursorSystem","scene","UpdateManager","LightSourceManager","LayerManager","Boot","banner","type","WEBGL","maxLights","parent","disableContextMenu","TILE_SIZE","ROOM_HEIGHT_IN_TILE","INVENTORY_WIDTH_IN_TILES_MOBILE","INVENTORY_WIDTH_IN_TILES_DESKTOP","INVENTORY_HEIGHT_IN_TILES_MOBILE","INVENTORY_HEIGHT_IN_TILES_DESKTOP","ROOM_FRAME_IN_TILES_DESKTOP","ROOM_FRAME_IN_TILES_MOBILE","ActionComponent","defaultAction","mode","DEFAULT_MODE","newAction","QUEUE_MODE","PAUSE_MODE","unshift","BehaviourComponent","_addBehaviours","Component","Manager","pluginManager","Plugins","ScenePlugin","layerSize","strartingDepth","startingDepth","backgroundLayer","group","rearDoorsLayer","wallFurnitureLayer","roomFurnitureLayer","sideDoorsLayer","npcLayer","playerLayer","cielingObjectsLayer","frontDoorsLayer","wallsLayer","wallsMaskLayer","overallDarknessLayer","borderMasksLayer","i","setDepth","graphicLights","diffusedLights","source","getChildren","lightSource","setPipeline","singleLightContributeAccumulator","light","isOn","singleLightContribute","diffusedLight","intensity","offset","lightBehaviour","runningBehaviour","behaviourLightContributeFactor","floor","singleLightIntensityAccumulator","averageLightsContribute","layers","events","systems","gameObjects","Structs","Set","_sceneUpdate","_sceneShutdown","once","_sceneDestroy","delta","iterateLocal","clear","off","_scenePostUpdate","obj","set","objs","delete","Room","sceneKey","rawAssets","assets","raw","array","map","rooms","_scrapeAssets","load","path","nPath","bPath","image","scrapeComplexObjKey","params","findFileNameFromPath","setName","lights","enable","bringToTop","_setCameraViewport","_createRoom","_createSprites","_applyBorderMasks","setLayersDepth","cameras","main","setBounds","startFollow","setRoundPixels","world","setPosition","setSize","make","tilemap","tilemapTiledJSON","tileWidth","tileHeight","createDynamicLayer","addTilesetImage","tiles","background","walls","_this","objects","layer","element","eval","create","setScrollFactor","setOrigin","_updateMasksByLightDiffusion","children","list","calculateAverageLightsContribute","setAlpha","Scene","searchKey","prop","nameFirstCharachterPosition","lastIndexOf","nameLastCharachterPosition","filename","slice","Sprite","texture","hasBody","behaviourType","blockExamineText","examineOrInteractOffsetX","examineOrInteractThresholdRadius","random","existing","updates","setCollideWorldBounds","setGravityY","warn","offsetX","offsetY","input","hitArea","Physics","Arcade","Character","Characters","NPCharacter","Player","pointerDown","InventoryItems","WorldItems","InentoryItem","InventoryItem","WorldItem","LightSources","RoomFurnitures","WallFurnitures","LightSource","graphicLightConfig","diffusedLightConfig","allowedBehaviours","initialConfig","graphicLight","turnOn","LightSourceBehaviourComponent","addLight","radius","setIntensity","stopBehaviours","stopAllBehaviours","diffusedLightindex","indexOf","splice","removeLight","graphicLightindex","turnOff","RoomFurniture","WallFurniture","cursorScene","sceneManager","lastTarget","CURSOR_SCENE_KEY","CursorScene","cursor","DEFAULT_CURSOR","activePointer","camera","worldX","EXAMINABLE_CURSOR","INTERACTIVE_CURSOR","TALKABLE_CURSOR","TalkTo","setTexture","setVisible","HOLD_CURSOR","CHOICE_CURSOR","CHOICE_PRESSED_CURSOR","setDefaultCursor","BasePlugin","autoStart","returnValue","availHeight","window","innerHeight","availWidth","innerWidth","screen","ceil"],"mappings":"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","file":"the-darkest-lib.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"TDLib\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"TDLib\"] = factory();\n\telse\n\t\troot[\"TDLib\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/TDLib.js\");\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","import CONST from './const';\n/**\n * @namespace TDLib\n */\n\nvar TDLib = {\n  Actions: require('./actions'),\n  Behaviours: require('./behaviours'),\n  Components: require('./components'),\n  Game: require('./boot/Game'),\n  Managers: require('./managers'),\n  Rooms: require('./rooms'),\n  Sprites: require('./sprites'),\n  Systems: require('./systems'),\n  Utils: require('./utils')\n};\n\nTDLib = Phaser.Utils.Objects.Extend(false, TDLib, CONST);\n\nmodule.exports = TDLib;\nglobal.TDLib = TDLib;\n","/**\n * Class representing a TDLAction.\n * @memberof TDLib.Components.Actions\n * @since 1.0.0\n */\nexport default class Action {\n  /**\n   * Start a new TDLAction.\n   * @param {TDLib.Components.ActionComponent|TDLib.Components.Actions.TDLAction} invoker - The invoker of the action.\n   * @param {TDLSprite} actor - The actor who performs the action.\n   * @param {Object} config - The config object for the action.\n   * @param {Object} config.target - The target of the action.\n   * @param {number} config.target.x - The x of the target of the action.\n   */\n  constructor(invoker, actor, config = {}) {\n    /**\n     * The invoker of the action.\n     * @type {TDLib.Components.ActionComponent|TDLib.Components.Actions.TDLAction}\n     * @since 1.0.0\n     */\n    this.invoker = invoker;\n\n    /**\n     * The name of the action.\n     * @type {string}\n     * @since 1.0.0\n     */\n    this.name = this.constructor.name;\n\n    /**\n     * The actor who performs the action.\n     * @type {TDLib.Sprites.TDLSprite}\n     * @since 1.0.0\n     */\n    this.actor = actor;\n\n    /**\n     * The target of the action.\n     * @type {Object|TDLib.Sprites.TDLSprite}\n     * @since 1.0.0\n     */\n    this.target = config.target;\n\n    /**\n     * The config object for the action.\n     * @type {Object}\n     * @since 1.0.0\n     */\n    this.config = config;\n\n    /**\n     * The queue of actions.\n     * @type {Array}\n     * @private\n     * @since 1.0.0\n     */\n    this._queue = [];\n\n    /**\n     * Tells if the action has been paused.\n     * @type {boolean}\n     * @since 1.0.0\n     */\n    this.isPaused = false;\n  }\n\n  /**\n   * Add one or more new actions to the queue.\n   * @param {TDLib.Components.Actions.TDLAction|TDLib.Components.Actions.TDLAction[]|TDLib.Components.Actions.TDLAction.BaseAction|TDLib.Components.Actions.TDLAction.BaseAction[]} actions - The new actions to add.\n   * @since 1.0.0\n   */\n  addActions(actions) {\n    if (Array.isArray(actions)) {\n      actions.forEach(action => {\n        this._queue.push(action);\n      });\n    } else this._queue.push(actions);\n  }\n\n  /**\n   * The blank action to create new composed and complex actions.\n   * @typedef {TDLib.Components.Actions.TDLAction.BaseAction}\n   *\n   * @property {TDLib.Components.ActionComponent|TDLib.Components.Actions.TDLAction} invoker - The invoker of the action.\n   * @property {Function} startCallback - The callback to execute at the beginning of the action.\n   * @property {Function} [finishCallback] - The callback to execute at the end of the action.\n   * @property {Function} [updateCallback]  - The callback to execute at every update loop.\n   * @property {Function} [resumeCallback=startCallback] - The callback to execute when the action is paused.\n   * @property {Function} [pauseCallback=finishCallback]  - The callback to execute when the action is resumed.\n   * @since 1.0.0\n   */\n  static get BaseAction() {\n    return class BaseAction {\n      constructor(invoker, startCallback, finishCallback = () => { }, updateCallback = () => { }, resumeCallback = startCallback, pauseCallback = finishCallback) {\n        this.invoker = invoker;\n\n        this.startCallback = startCallback;\n        this.finishCallback = finishCallback;\n        this.updateCallback = updateCallback;\n        this.resumeCallback = resumeCallback;\n        this.pauseCallback = pauseCallback;\n\n        this.isPaused = false;\n      }\n\n      start() {\n        this.startCallback();\n      }\n\n      finish() {\n        this.finishCallback();\n        this.invoker.remove();\n      }\n\n      abort() {\n        this.finishCallback();\n      }\n\n      resume() {\n        this.isPaused = false;\n        this.resumeCallback();\n      }\n\n      pause() {\n        this.pauseCallback();\n        this.isPaused = true;\n      }\n\n      update() {\n        this.updateCallback();\n      }\n    };\n  }\n\n  /**\n   * Abort an uncompleted action.\n   * @private\n   * @since 1.0.0\n   */\n  abort() {\n    if (this._queue.length > 0) this._queue[0].abort();\n  }\n\n  /**\n   * Start an action.\n   * @private\n   * @since 1.0.0\n   */\n  start() {\n    if (this._queue.length > 0) this._queue[0].start();\n  }\n\n  /**\n   * Finish a completed action.\n   * @private\n   * @since 1.0.0\n   */\n  finish() {\n    if (this._queue.length > 0) this._queue[0].finish();\n  }\n\n  /**\n   * Remove a completed action from the queue.\n   * @private\n   * @since 1.0.0\n   */\n  remove() {\n    if (this._queue.length > 0) this._queue.shift();\n\n    if (this._queue.length <= 0) this.invoker.remove();\n    else this._queue[0].start();\n  }\n\n  /**\n   * Pause an action.\n   * @private\n   * @since 1.0.0\n   */\n  pause() {\n    if (this._queue.length > 0) {\n      this._queue[0].pause();\n      this.isPaused = true;\n    }\n  }\n\n  /**\n   * Resume a paused action.\n   * @private\n   * @since 1.0.0\n   */\n  resume() {\n    if (this._queue.length > 0) {\n      this.isPaused = false;\n      this._queue[0].resume();\n    }\n  }\n\n  /**\n   * Update the currently performed action.\n   * @private\n   * @since 1.0.0\n   */\n  update() {\n    if (this._queue.length > 0) this._queue[0].update();\n  }\n}\n","import Action from '../Action';\nimport WalkTo from '../walk-to/WalkTo';\n\nexport default class Examine extends Action {\n  constructor(invoker, actor, config) {\n    super(...arguments);\n    this.addActions(\n      [\n        new WalkTo(this, this.actor, this.config),\n        this.target.behaviour.examine.getAction(this)\n      ]\n    );\n  }\n}\n","import Action from '../Action';\nimport CONST from '../../const';\nimport Settings from './Settings';\n\nexport default class FaceTo extends Action {\n  constructor(invoker, actor, config) {\n    super(...arguments);\n    this.addActions(\n      new Action.BaseAction(\n        this,\n        () => {\n          if (Math.abs(this.actor.x - this.target.x) > Settings.MICRO_MOVEMENT_RADIUS) {\n            if (this.actor.facing === CONST.RIGHT) {\n              if (this.actor.x > this.target.x) {\n                this.actor.facing = CONST.LEFT;\n                this.actor.setFlipX(true);\n                // this.actor.anims.play('idleLeft');\n              }\n            } else if (this.actor.facing === CONST.LEFT) {\n              if (this.actor.x < this.target.x) {\n                this.actor.facing = CONST.RIGHT;\n                this.actor.setFlipX(false);\n                // this.actor.anims.play('idleRight');\n              }\n            }\n          }\n          this.finish();\n        }\n      )\n    );\n  }\n}\n","const Settings = {\n  MICRO_MOVEMENT_RADIUS: 6\n};\n\nmodule.exports = Settings;\n","import Action from '../Action';\nimport CONST from '../../const';\n\n/**\n * Class representing the idle action.\n * @extends TDLib.Components.Actions.Action\n * @memberof TDLib.Components.Actions\n */\nexport default class Idle extends Action {\n  /**\n   * Start a new idle action.\n   * @param {Components.ActionComponent|Components.Actions.TDLAction} invoker - The invoker of the action.\n   * @param {TDLSprite} actor - The actor who performs the action.\n   * @param {Object} config - The config object for the action.\n   * @param {Object} config.target - The target of the action.\n   * @param {number} config.target.x - The x of the target of the action.\n   */\n  constructor(invoker, actor, config) {\n    super(...arguments);\n    this.addActions(\n      new Action.BaseAction(\n        this,\n        () => {\n          this.actor.body.setVelocity(0);\n          switch (this.actor.facing) {\n\n            case CONST.LEFT: {\n              this.actor.anims.play('idle');\n              // this.actor.anims.play('idleLeft');\n            }\n              break;\n\n            case CONST.RIGHT: {\n              this.actor.anims.play('idle');\n              // this.actor.anims.play('idleRight');\n            }\n              break;\n\n            // possibili altri casi di facing (es girato di spalle o da davanti)\n          }\n        }\n      )\n    );\n  }\n}\n","const Actions = {\n  Action: require('./Action'),\n  Examine: require('./examine/Examine'),\n  FaceTo: require('./face-to/FaceTo'),\n  Idle: require('./idle/Idle'),\n  Interact: require('./interact/Interact'),\n  Observe: require('./observe/Observe'),\n  RunTo: require('./run-to/RunTo'),\n  WalkTo: require('./walk-to/WalkTo')\n};\n\nmodule.exports = Actions;\n","import Action from '../Action';\nimport WalkTo from '../walk-to/WalkTo';\n\nexport default class Interact extends Action {\n  constructor(invoker, actor, config) {\n    super(...arguments);\n    this.addActions(\n      [\n        new WalkTo(this, this.actor, this.config),\n        this.target.behaviour.interact.getAction(this)\n      ]\n    );\n  }\n}\n","import Action from '../Action';\nimport FaceTo from '../face-to/FaceTo';\n\nexport default class Observe extends Action {\n  constructor(invoker, actor, config) {\n    super(...arguments);\n    this.addActions(\n      [\n        new FaceTo(this, this.actor, this.config),\n        this.target.behaviour.observe.getAction(this)\n      ]\n    );\n  }\n}\n","import Action from '../Action';\nimport FaceTo from '../face-to/FaceTo';\nimport Settings from './Settings';\n\n// da cambiare e mettere tutta dentro l'AWalkTo e fare un Move to che distingua che azioni chiamare?\nexport default class RunTo extends Action {\n  constructor(invoker, actor, config) {\n    super(...arguments);\n    this.addActions(\n      [\n        new FaceTo(this, this.actor, this.config),\n        new Action.BaseAction(\n          this,\n          () => {\n            if (Math.abs(this.actor.x - this.target.x) > Settings.MICRO_MOVEMENT_RADIUS) {\n              if (this.actor.x < this.target.x) {\n                this.actor.anims.play('run');\n                // this.actor.anims.play('runRight');\n                this.actor.body.setVelocity(Settings.RUN_VELOCITY);\n              } else if (this.actor.x > this.target.x) {\n                this.actor.anims.play('run');\n                // this.actor.anims.play('runLeft');\n                this.actor.body.setVelocity(-Settings.RUN_VELOCITY);\n              }\n              console.log('start to run to ', config.target.x);\n            } else {\n              this.finish();\n            }\n          },\n          () => {\n            this.actor.body.setVelocity(0);\n          },\n          () => {\n            if ((this.actor.x - this.target.x) * this.actor.body.velocity.x > 0) this.finish();\n          }\n        )\n      ]\n    );\n  }\n}\n","const Settings = {\n  RUN_VELOCITY: 240,\n  MICRO_MOVEMENT_RADIUS: 20\n};\n\nmodule.exports = Settings;\n","const Settings = {\n  WALK_VELOCITY: 100,\n  MICRO_MOVEMENT_RADIUS: 20\n};\n\nmodule.exports = Settings;\n","import Action from '../Action';\nimport FaceTo from '../face-to/FaceTo';\nimport Settings from './Settings';\n\nexport default class WalkTo extends Action {\n  constructor(invoker, actor, config) {\n    super(...arguments);\n    this.addActions(\n      [\n        new FaceTo(this, this.actor, this.config),\n        new Action.BaseAction(\n          this,\n          () => {\n            if (Math.abs(this.actor.x - this.target.x) > Settings.MICRO_MOVEMENT_RADIUS) {\n              if (this.actor.x < this.target.x) {\n                this.actor.anims.play('walk');\n                // this.actor.anims.play('walkRight');\n                this.actor.body.setVelocity(Settings.WALK_VELOCITY);\n              } else if (this.actor.x > this.target.x) {\n                this.actor.anims.play('walk');\n                // this.actor.anims.play('walkLeft');\n                this.actor.body.setVelocity(-Settings.WALK_VELOCITY);\n              }\n            } else {\n              this.finish();\n            }\n          },\n          () => {\n            this.actor.body.setVelocity(0);\n          },\n          () => {\n            if ((this.actor.x - this.target.x) * this.actor.body.velocity.x > 0) this.finish();\n          }\n        )\n      ]\n    );\n  }\n}\n","import Action from '../actions/Action';\n\n/**\n * Class representing the behaviour of a sprite.\n * @memberof TDLib.Components.SpriteBehaviours\n * @since 1.0.0\n */\nexport default class Behaviour {\n  /**\n   * Create a SpriteBehaviour.\n   * @param {TDLib.Components.SpriteBehaviourComponent} component - The component which has invoked the behaviour.\n   */\n  constructor(component) {\n    /**\n     * The component which has invoked the behaviour.\n     * @type {TDLib.Components.SpriteBehaviourComponent}\n     * @since 1.0.0\n     */\n    this.component = component;\n\n    /**\n     * The global cursor manager.\n     * @type {TDLib.Plugins.GlobalPlugins.CursorManager}\n     * @since 1.0.0\n     */\n    this.cursors = this.component.gameObject.room.cursors;\n\n    /**\n     * The sprite which has invoked the behaviour.\n     * @type {TDLib.Sprites.TDLSprite}\n     * @since 1.0.0\n     */\n    this.gameObject = this.component.gameObject;\n\n    /**\n     * The room where the gameObject lives.\n     * @type {TDLib.Rooms.TDLRoom}\n     * @since 1.0.0\n     */\n    this.room = this.component.gameObject.room;\n\n    this.add();\n  }\n\n  /**\n   * Set the gameObject as interactive.\n   * @since 1.0.0\n   */\n  add() {\n    if (this.component.pixelPerfect === null) this.component.gameObject.setInteractive();\n    else {\n      this.component.gameObject.setInteractive(\n        {\n          pixelPerfect: true,\n          alphaTolerance: this.component.pixelPerfect.alphaTolerance,\n          draggable: false\n        }\n      );\n    }\n  }\n\n  /**\n   * Generate a proper action according to the behaviour and the gameObject settings.\n   * @return {TDLib.Components.Actions.TDLAction}\n   * @since 1.0.0\n   */\n  getAction(invoker) {\n    return new Action.BaseAction(\n      invoker,\n      () => {\n        console.log('Sono una generica action dei behaviour');\n        invoker.finish();\n      }\n    );\n  }\n\n  checkLight(value) {\n    if (this.room.lightSources.calculateLightsContribuitePoint(this.gameObject) >= value) return true;\n    return false;\n  }\n}\n","const CONST = {\n  EXAMINABLE: 'EXAMINABLE',\n  INERT: 'INERT',\n  INTERACTIVE: 'INTERACTIVE',\n  TALKABLE: 'TALKABLE',\n  INVENTORY: 'INVENTORY',\n\n  DEFAULT_MIN_LIGHT_LEVEL_TO_OBSERVE: 0.05,\n  DEFAULT_OBSERVE_TEXT: 'Observe default text',\n  DEFAULT_NO_LIGHT_OBSERVE_TEXT: 'NoLightObserve default text',\n  DEFAULT_MIN_LIGHT_LEVEL_TO_EXAMINE_OR_INTERACT: 0.04,\n  DEFAULT_EXAMINE_OR_INTERACT_TEXT: 'ExamineOrInteract default text',\n  DEFAULT_NO_LIGHT_EXAMINE_OR_INTERACT_TEXT: 'NoLightExamineOrInteract default text'\n};\n\nmodule.exports = CONST;\n","import Behaviour from '../Behaviour';\nimport Action from '../../actions/Action';\n\nexport default class Examinable extends Behaviour {\n  constructor(component) {\n    super(component);\n  }\n\n  /**\n   * Generate a proper action according to the behaviour and the gameObject settings.\n   * @return {TDLib.Components.Actions.TDLAction}\n   * @since 1.0.0\n   */\n  getAction(invoker) {\n    return new Action.BaseAction(\n      invoker,\n      () => {\n        // Fare i controlli su quanta luce c' nella stanza!\n        if (this.checkLight(this.gameObject.minLightLevelToExamineOrInteract)) console.log(this.gameObject.examineOrInteractText);\n        else console.log(this.gameObject.noLightExamineOrInteractText);\n        invoker.finish();\n      }\n    );\n  }\n}\n","import CONST from './const';\n\nvar Behaviours = {\n  Behaviour: require('./Behaviour'),\n  Examinable: require('./examinable/Examinable'),\n  Interactive: require('./interactive/Interactive'),\n  Observable: require('./observable/Observable'),\n  Talkable: require('./talkable/Talkable'),\n  Inventory: require('./inventory/Inventory')\n};\n\nBehaviours = Phaser.Utils.Objects.Extend(false, Behaviours, CONST);\nmodule.exports = Behaviours;\n","import Behaviour from '../Behaviour';\nimport Action from '../../actions/Action';\n\nexport default class Interactive extends Behaviour {\n  constructor(component) {\n    super(component);\n  }\n\n  /**\n   * Generate a proper action according to the behaviour and the gameObject settings.\n   * @return {TDLib.Components.Actions.TDLAction}\n   * @since 1.0.0\n   */\n  getAction(invoker) {\n    return new Action.BaseAction(\n      invoker,\n      () => {\n        // Fare i controlli su quanta luce c' nella stanza!\n        if (this.checkLight(this.gameObject.minLightLevelToExamineOrInteract)) console.log(this.gameObject.examineOrInteractText);\n        else console.log(this.gameObject.noLightExamineOrInteractText);\n        invoker.finish();\n      }\n    );\n  }\n}\n","export default class Inventory {\n  constructor() {\n\n  }\n}\n","import Behaviour from '../Behaviour';\nimport Actions from '../../actions';\nimport Settings from './Settings';\n\nexport default class Observable extends Behaviour {\n  constructor(component) {\n    super(component);\n\n    this._timer;\n  }\n\n  add() {\n    super.add();\n\n    this.gameObject.on('pointerover', function (pointer) {\n      this.cursors.setCursor(this.gameObject);\n\n      this._timer = this.gameObject.room.time.addEvent({\n        delay: Settings.DEFAULT_MIN_TIME_TO_OBSERVE,\n        callback: () => {\n          if (this.gameObject !== this.room.player && !this.room.player.isBlocked) this.room.player.actions.add(Actions.Observe, { target: this.gameObject });\n        },\n        callbackScope: this\n      });\n    }.bind(this));\n\n    this.gameObject.on('pointerout', function (pointer) {\n      this._timer.remove(false);\n      this.cursors.setCursor();\n    }.bind(this));\n  }\n\n  /**\n   * Delete the timer which starts the AObserve action.\n   */\n  abort() {\n    this._timer.remove(false);\n  }\n\n  /**\n   * Generate a proper action according to the behaviour and the gameObject settings.\n   * @return {TDLib.Components.Actions.TDLAction}\n   * @since 1.0.0\n   */\n  getAction(invoker) {\n    return new Actions.Action.BaseAction(\n      invoker,\n      () => {\n        // Fare i controlli su quanta luce c' nella stanza!\n        if (this.checkLight(this.gameObject.minLightLevelToObserve)) console.log(this.gameObject.observeText);\n        else console.log(this.gameObject.noLightObserveText);\n        invoker.finish();\n      }\n    );\n  }\n}\n","const Settings = {\n  DEFAULT_MIN_TIME_TO_OBSERVE: 1200\n};\n\nmodule.exports = Settings;\n","var CONST = require('../const');\nvar Settings = require('./Settings');\n\n/**\n * Called automatically by Phaser.Game and responsible for creating the console.log debug header.\n *\n * You can customize or disable the header via the Game Config object.\n *\n * @function Phaser.Boot.DebugHeader\n * @since 3.0.0\n *\n * @param {Phaser.Game} game - The Phaser.Game instance which will output this debug header.\n */\nvar DebugHeader = function (game) {\n  let config = game.config;\n\n  config.bannerBackgroundColor = '#0002e6';\n  config.bannerTextColor = '#ffffff';\n  config.hidePhaser = false;\n\n  let renderType = 'WebGL';\n\n  if (config.renderType !== 2) {\n    renderType = 'NULL';\n  }\n\n  let audioConfig = config.audio;\n  let deviceAudio = game.device.audio;\n\n  let audioType;\n\n  if (deviceAudio.webAudio && !(audioConfig && audioConfig.disableWebAudio)) {\n    audioType = 'Web Audio';\n  } else if ((audioConfig && audioConfig.noAudio) || (!deviceAudio.webAudio && !deviceAudio.audioData)) {\n    audioType = 'No Audio';\n  } else {\n    audioType = 'HTML5 Audio';\n  }\n\n  if (!game.device.browser.ie) {\n    let c = '';\n    let args = [c];\n\n    if (Array.isArray(config.bannerBackgroundColor)) {\n      let lastColor;\n\n      config.bannerBackgroundColor.forEach(function (color) {\n        c = c.concat('%c ');\n\n        args.push('background: ' + color);\n\n        lastColor = color;\n\n      });\n\n      //  inject the text color\n      args[args.length - 1] = 'color: ' + config.bannerTextColor + '; background: ' + lastColor;\n    } else {\n      c = c.concat('%c ');\n\n      args.push('color: ' + config.bannerTextColor + '; background: ' + config.bannerBackgroundColor);\n    }\n\n    //  URL link background color (always white)\n    args.push('background: #fff');\n\n    if (config.gameTitle) {\n      c = c.concat(config.gameTitle);\n\n      if (config.gameVersion) {\n        c = c.concat(' v' + config.gameVersion);\n      }\n\n      if (!config.hidePhaser) {\n        c = c.concat(' / ');\n      }\n    }\n\n    if (!config.hidePhaser) {\n      c = c.concat('TDLib v' + CONST.VERSION + ' / Phaser v' + CONST.PHASER_VERSION);\n      c = c.concat(' (' + renderType + ' | ' + audioType + ' | ' + Settings.DEVICE + ')');\n    }\n\n    c = c.concat(' %c ' + config.gameURL);\n\n    //  Inject the new string back into the args array\n    args[0] = c;\n\n    console.log.apply(console, args);\n  }\n};\n\nmodule.exports = DebugHeader;\n","import Settings from './Settings';\nimport DebugHeader from './DebugHeader';\nimport Utils from '../utils';\nimport Managers from '../managers';\nimport Systems from '../systems';\n\nexport default class Game {\n  constructor(config) {\n    this.config = config;\n    this._setScreenConfig();\n    this._setPhysicsConfig();\n    this._setPlugins();\n    this._setBoot();\n    this._setHeaderProps();\n    this._finalizeConfig();\n\n    // Aggiungere il device e la funzione per determinarlo\n\n    Settings.GAME = new Phaser.Game(this.config);\n\n    DebugHeader(Settings.GAME);\n    return Settings.GAME;\n  }\n\n  _setScreenConfig() {\n    Settings.SCREEN_PROPS = Utils.getScreenProps();\n\n    this.config.width = Settings.SCREEN_PROPS.calculatedWidth;\n    this.config.height = Settings.SCREEN_PROPS.calculatedHeight;\n    this.config.zoom = Settings.SCREEN_PROPS.calculatedZoom;\n\n    this.config.autoResize = false;\n    this.config.backgroundColor = '#000000';\n    this.config.pixelArt = true;\n  }\n\n  _setPhysicsConfig() {\n    this.config.physics = {\n      default: 'arcade',\n      arcade: {\n        debug: false,\n        gravity: { y: 0, x: 0 }\n      }\n    };\n  }\n\n  _setPlugins() {\n    this.config.plugins = {\n      global: [\n        { key: 'RoomSystem', plugin: Systems.RoomSystem, start: false, mapping: 'rooms' },\n        { key: 'CursorSystem', plugin: Systems.CursorSystem, start: false, mapping: 'cursors' }\n      ],\n      scene: [\n        { key: 'UpdateManager', plugin: Managers.UpdateManager, mapping: 'updates' },\n        { key: 'LightSourceManager', plugin: Managers.LightSourceManager, mapping: 'lightSources' },\n        { key: 'LayerManager', plugin: Managers.LayerManager, mapping: 'layers' }\n        // { key: 'ActionManager', plugin: ActionManager, mapping: 'actions' }\n      ]\n    };\n  }\n\n  _setBoot() {\n    this.config.scene = [Boot];\n  }\n\n  _setHeaderProps() {\n    this.config.banner = false;\n  }\n\n  _finalizeConfig() {\n    this.config.type = Phaser.WEBGL;\n    this.config.maxLights = 20;\n    this.config.parent = 'game';\n    this.config.disableContextMenu = true;\n  }\n}\n","var Settings = {\n  GAME: '',\n  TILE_SIZE: 48,\n  ROOM_HEIGHT_IN_TILE: 6,\n  INVENTORY_WIDTH_IN_TILES_MOBILE: 1.25,\n  INVENTORY_WIDTH_IN_TILES_DESKTOP: 0,\n  INVENTORY_HEIGHT_IN_TILES_MOBILE: 0,\n  INVENTORY_HEIGHT_IN_TILES_DESKTOP: 1,\n  ROOM_FRAME_IN_TILES_DESKTOP: 0.5,\n  ROOM_FRAME_IN_TILES_MOBILE: 0.25,\n  SCREEN_PROPS: {},\n  DEVICE: 'Desktop'\n};\n\nmodule.exports = Settings;\n","import Component from './Component';\nimport Actions from '../actions';\n\n/**\n * The actions namespace.\n * @namespace TDLib.Components.Actions\n * @since 1.0.0\n */\n\n/**\n * Class representing a component responsible of every TDLAction preformed.\n * @extends TDLib.Components.TDLComponent\n * @memberof TDLib.Components\n * @since 1.0.0\n */\nexport default class ActionComponent extends Component {\n  /**\n   * Create an ActionComponent.\n   * @param {TDLib.Sprites.TDLSprite} actor - The performer of the action.\n   */\n  constructor(actor) {\n    super(actor);\n\n    /**\n     * The performer of the action.\n     * @type {TDLib.Sprites.TDLSprite}\n     * @since 1.0.0\n     */\n    this.actor = actor;\n\n    /**\n     * The default action to be played.\n     * @type {TDLib.Components.Actions.TDLAction}\n     * @since 1.0.0\n     */\n    this.defaultAction = new Actions.Idle(this, this.actor);\n\n    /**\n     * The queue of actions.\n     * @type {Array}\n     * @private\n     * @since 1.0.0\n     */\n    this._queue = [this.defaultAction];\n    this._queue[0].start();\n  }\n\n  /**\n   * The queue is emptied and the new action is immediately performed.\n   * @since 1.0.0\n   */\n  static get DEFAULT_MODE() {\n    return 0;\n  }\n\n  /**\n   * The new action is added to the queue.\n   * @since 1.0.0\n   */\n  static get QUEUE_MODE() {\n    return 1;\n  }\n\n  /**\n   * The currently performed action is paused and the new action is immediately performed. Then the paused action is resumed.\n   * @since 1.0.0\n   */\n  static get PAUSE_MODE() {\n    return 2;\n  }\n\n  /**\n   * Start a new action or add that to the queue.\n   * @param {TDLib.Components.Actions.TDLAction} action - The action to add or execute.\n   * @param {Object} config - The config object for the action.\n   * @param {Object} config.target - The target of the action.\n   * @param {number} config.target.x - The x of the target of the action.\n   * @param {number} [mode=ActionComponent.DEFAULT_MODE] - The mode to execute the action: ActionComponent.DEFAULT_MODE, ActionComponent.QUEUE_MODE or ActionComponent.PAUSE_MODE.\n   * @since 1.0.0\n   */\n  add(Action, config, mode = ActionComponent.DEFAULT_MODE) {\n\n    let newAction = new Action(this, this.actor, config);\n\n    switch (mode) {\n      case ActionComponent.DEFAULT_MODE: {\n        this._queue[0].abort();\n        this._queue = [];\n        this._queue.push(newAction);\n        this._queue[0].start();\n      };\n        break;\n\n      case ActionComponent.QUEUE_MODE: {\n        this._queue.push(newAction);\n      };\n        break;\n\n      case ActionComponent.PAUSE_MODE: {\n        this._queue[0].pause();\n        this._queue.unshift(newAction);\n        this._queue[0].start();\n      };\n        break;\n    }\n\n    return newAction;\n  }\n\n  /**\n   * Remove a completed action from the queue.\n   * @private\n   * @since 1.0.0\n   */\n  remove() {\n    this._queue.shift();\n    if (this._queue.length <= 0) this._queue.push(this.defaultAction);\n    if (this._queue[0].isPaused) this._queue[0].resume();\n    else this._queue[0].start();\n  }\n\n  /**\n   * Update the currently performed action.\n   * @private\n   * @since 1.0.0\n   */\n  update() {\n    if (this._queue.length <= 0) this._queue.push(this.defaultAction);\n    else if (this._queue.length > 1 && this._queue[0].name === 'Idle') {\n      this._queue.shift();\n      if (this._queue[0].isPaused) this._queue[0].resume();\n      else this._queue[0].start();\n    }\n\n    this._queue[0].update();\n  }\n}\n","import Component from './Component';\nimport Behaviours from '../behaviours';\n\n/**\n * The behaviours namespace.\n * @namespace TDLib.Components.SpriteBehaviours\n * @since 1.0.0\n */\n\n/**\n * Class representing a component which determines the behaviour of every sprite.\n * @extends TDLib.Components.TDLComponent\n * @memberof TDLib.Components\n * @since 1.0.0\n */\nexport default class BehaviourComponent extends Component {\n  /**\n   * Create a new SpriteBehaviourComponent\n   * @param {TDLib.Sprites.TDLSprite} gameObject - The sprite which implements the component.\n   * @param {string} type - The type of behaviour of the gameObject.\n   * @param {Object} [pixelPerfect=null] - If not null enable the pixel perfect pointer hit for the sprite.\n   * @param {boolean} [pixelPerfect.alphaTolerance] - The alpha tolerance threshold value.\n   */\n  constructor(gameObject, type, pixelPerfect) {\n    super(gameObject);\n\n    /**\n     * A reference to the player in the current room.\n     * @type {TDLib.Sprites.Characters.Players.Player}\n     * @since 1.0.0\n     */\n    this.player;\n    (typeof this.gameObject.room.player === 'undefined') ? this.player = this.gameObject : this.player = this.gameObject.room.player;\n\n    /**\n     * The type of behaviour of the gameObject.\n     * @type {string}\n     * @since 1.0.0\n     */\n    this.type = type;\n\n    /**\n     * If not null enable the pixel perfect pointer hit for the sprite.\n     * @type {string}\n     * @since 1.0.0\n     */\n    this.pixelPerfect = pixelPerfect;\n\n    this._addBehaviours();\n  }\n\n  /**\n   * Select the appropriate behaviours for the gameObject.\n   * @private\n   * @since 1.0.0\n   */\n  _addBehaviours() {\n    // Se l'oggetto  osservabile (cio esaminabile o interagibile) setto il cursore appropriato\n    if (this.type === Behaviours.EXAMINABLE || this.type === Behaviours.INTERACTIVE) {\n      this.observe = new Behaviours.Observable(this);\n      if (this.type === Behaviours.EXAMINABLE) this.examine = new Behaviours.Examinable(this);\n      else if (this.type === Behaviours.INTERACTIVE) this.interact = new Behaviours.Interactive(this);\n    }\n  }\n}\n","/**\n * The namespace of components.\n * @namespace TDLib.Components\n */\n\n/**\n * Class representing a generic TDLComponent. A TDLComponent extends the members and methods of a TDLSprite which uses it.\n * @memberof TDLib.Components\n */\nexport default class Component {\n  /**\n   * Creates a new TDLComponent.\n   * @param {TDLib.Sprites.TDLSprite} gameObject - The TDLSprite which owns the component.\n   */\n  constructor(gameObject) {\n\n    /**\n     * The name of the component.\n     * @type {string}\n     */\n    this.name = this.constructor.name;\n\n    /**\n     * The TDLSprite which owns the component.\n     * @type {TDLib.Sprites.TDLSprite}\n     */\n    this.gameObject = gameObject;\n  }\n}\n","const Components = {\n  Component: require('./Component'),\n  ActionComponent: require('./ActionComponent'),\n  BehaviourComponent: require('./BehaviourComponent')\n};\n\nmodule.exports = Components;\n","const CONST = {\n  VERSION: '1.0.0',\n  PHASER_VERSION: Phaser.VERSION,\n  LEFT: '_left',\n  RIGHT: '_right'\n};\n\nmodule.exports = CONST;\n","/**\n * The plugins namespace.\n * @namespace TDLib.Plugins\n * @since 1.0.0\n */\n\n/**\n * The global plugins namespace.\n * @namespace TDLib.Plugins.GlobalPlugins\n * @since 1.0.0\n */\n\n/**\n * The room plugins namespace.\n * @namespace TDLib.Plugins.RoomPlugins\n * @since 1.0.0\n */\n\n/**\n * Class representing a plugin which manages a room.\n * @extends Phaser.Plugins.ScenePlugin\n * @memberof TDLib.Plugins\n * @since 1.0.0\n */\nexport default class Manager extends Phaser.Plugins.ScenePlugin {\n  /**\n   * Create a TDLRoomPlugin.\n   * @param {TDLib.Rooms.Room|Phaser.Scene} room - The room which contains the plugin.\n   * @param {Phaser.Plugins.PluginManager} pluginManager - A reference to the plugin manager.\n   */\n  constructor(room, pluginManager) {\n    super(room, pluginManager);\n\n    /**\n     * The room containing this plugin.\n     * @type {TDLib.Rooms.Room}\n     * @since 1.0.0\n     */\n    this.room = room;\n  }\n}\n","const Managers = {\n  LayerManager: require('./layers/LayerManager'),\n  LightSourceManager: require('./light-sources/LightSourceManager'),\n  Manager: require('./Manager'),\n  UpdateManager: require('./updates/UpdateManager')\n};\n\nmodule.exports = Managers;\n","import Manager from '../Manager';\nimport Settings from './Settings';\n\n/**\n * Class representing the manager of the layers in every room.\n * @extends TDLib.Plugins.TDLRoomPlugin\n * @memberof TDLib.Plugins.RoomPlugins\n * @since 1.0.0\n */\nexport default class LayerManager extends Manager {\n  /**\n   * Create a new RoomManager.\n   * @param {TDLib.Rooms.Room} room - The room in which the layer manager operates.\n   * @param {Phaser.Plugins.PluginManager} pluginManager - A reference to the plugin manager.\n   */\n  constructor(room, pluginManager) {\n    super(room, pluginManager);\n    /**\n     * The size in cells of each layer.\n     * @type {number}\n     * @since 1.0.0\n     */\n    this.layerSize = Settings.layerSize;\n\n    /**\n     * The starting depth of layers.\n     * @type {number}\n     * @since 1.0.0\n     */\n    this.strartingDepth = Settings.startingDepth;\n  }\n\n  /**\n   * Boot all the layers in the correct order.\n   * @since 1.0.0\n   */\n  boot() {\n    /**\n     * The layer containing the background wall.\n     * @type {Phaser.GameObjects.Group}\n     * @since 1.0.0\n     */\n    this.backgroundLayer = this.room.add.group();\n\n    /**\n     * The layer containing the rear doors.\n     * @type {Phaser.GameObjects.Group}\n     * @since 1.0.0\n     */\n    this.rearDoorsLayer = this.room.add.group();\n\n    /**\n     * The layer containing the objects fixed to the background wall.\n     * @type {Phaser.GameObjects.Group}\n     * @since 1.0.0\n     */\n    this.wallFurnitureLayer = this.room.add.group();\n\n    /**\n     * The layer containing the objects in the room.\n     * @type {Phaser.GameObjects.Group}\n     * @since 1.0.0\n     */\n    this.roomFurnitureLayer = this.room.add.group();\n\n    /**\n     * The layer containing the side doors.\n     * @type {Phaser.GameObjects.Group}\n     * @since 1.0.0\n     */\n    this.sideDoorsLayer = this.room.add.group();\n\n    /**\n     * The layer containing the NPCs.\n     * @type {Phaser.GameObjects.Group}\n     * @since 1.0.0\n     */\n    this.npcLayer = this.room.add.group();\n\n    /**\n     * The layer containing the player.\n     * @type {Phaser.GameObjects.Group}\n     * @since 1.0.0\n     */\n    this.playerLayer = this.room.add.group();\n\n    /**\n     * The layer containing the cieling objects from the roof.\n     * @type {Phaser.GameObjects.Group}\n     * @since 1.0.0\n     */\n    this.cielingObjectsLayer = this.room.add.group();\n\n    /**\n     * The layer containing the front doors.\n     * @type {Phaser.GameObjects.Group}\n     * @since 1.0.0\n     */\n    this.frontDoorsLayer = this.room.add.group();\n\n    /**\n     * The layer containing the lateral walls.\n     * @type {Phaser.GameObjects.Group}\n     * @since 1.0.0\n     */\n    this.wallsLayer = this.room.add.group();\n\n    /**\n     * The layer containing the lateral walls black mask.\n     * @type {Phaser.GameObjects.Group}\n     * @since 1.0.0\n     */\n    this.wallsMaskLayer = this.room.add.group();\n\n    /**\n     * The layer containing the overall darkness mask.\n     * @type {Phaser.GameObjects.Group}\n     * @since 1.0.0\n     */\n    this.overallDarknessLayer = this.room.add.group();\n\n    /**\n     * The layer containing the border black masks.\n     * @type {Phaser.GameObjects.Group}\n     * @since 1.0.0\n     */\n    this.borderMasksLayer = this.room.add.group();\n  }\n\n  /**\n   * Set the correct depth for each layer in the right order.\n   * @since 1.0.0\n   */\n  setLayersDepth() {\n    let i = this.strartingDepth;\n\n    this.backgroundLayer.setDepth(this.layerSize * i);\n    i++;\n    this.rearDoorsLayer.setDepth(this.layerSize * i);\n    i++;\n    this.wallFurnitureLayer.setDepth(this.layerSize * i);\n    i++;\n    this.roomFurnitureLayer.setDepth(this.layerSize * i);\n    i++;\n    this.sideDoorsLayer.setDepth(this.layerSize * i);\n    i++;\n    this.npcLayer.setDepth(this.layerSize * i);\n    i++;\n    this.playerLayer.setDepth(this.layerSize * i);\n    i++;\n    this.cielingObjectsLayer.setDepth(this.layerSize * i);\n    i++;\n    this.frontDoorsLayer.setDepth(this.layerSize * i);\n    i++;\n    this.wallsLayer.setDepth(this.layerSize * i);\n    i++;\n    this.wallsMaskLayer.setDepth(this.layerSize * i);\n    i++;\n    this.overallDarknessLayer.setDepth(this.layerSize * i);\n    i++;\n    this.borderMasksLayer.setDepth(this.layerSize * i);\n    i++;\n  }\n}\n","const Settings = {\n  layerSize: 10,\n  startingDepth: 0\n};\n\nmodule.exports = Settings;\n","import Manager from '../Manager';\nimport GlobalSettings from '../../boot/Settings';\n\nexport default class LightSourceManager extends Manager {\n  constructor(room, pluginManager) {\n    super(room, pluginManager);\n\n    this.graphicLights = [];\n    this.diffusedLights = [];\n  }\n\n  boot() {\n    this.lightSources = this.room.add.group();\n  }\n\n  add(source) {\n    this.lightSources.add(source, true);\n    this.lightSources.getChildren().forEach(lightSource => {\n      lightSource.setPipeline('Light2D');\n    });\n\n    return source;\n  }\n\n  // Le luci che flickerano o con comportamenti strani vanno contate?\n  calculateLightsContribuitePoint(target) {\n    let singleLightContributeAccumulator = 0;\n\n    this.lightSources.getChildren().forEach(light => {\n      if (light.isOn) {\n        let singleLightContribute = light.config.diffusedLight.intensity / (Math.abs(light.x + light.config.offset.x - target.x) ^ 2);\n\n        if (light.lightBehaviour.runningBehaviour !== null) {\n          singleLightContribute *= light.lightBehaviour.runningBehaviour.behaviourLightContributeFactor;\n        }\n\n        singleLightContributeAccumulator += singleLightContribute;\n      }\n    });\n\n    return Math.floor(singleLightContributeAccumulator * 10000) / 1000;\n  }\n\n  calculateAverageLightsContribute() {\n    let singleLightIntensityAccumulator = 0;\n\n    this.diffusedLights.forEach(light => {\n      singleLightIntensityAccumulator += light.intensity;\n    });\n    let averageLightsContribute = 0;\n\n    if (singleLightIntensityAccumulator !== 0) averageLightsContribute = Math.floor((singleLightIntensityAccumulator * 10000 / this.room.layers.wallsLayer.width / GlobalSettings.TILE_SIZE) * 100) / 100 + 0.3;\n    return averageLightsContribute;\n  }\n}\n","import Manager from '../Manager';\n\n/**\n * Class representing the update plugin.\n * @extends TDLib.Plugins.TDLRoomPlugin\n * @memberof TDLib.Plugins.RoomPlugins\n * @since 1.0.0\n */\nexport default class UpdateManager extends Manager {\n  /**\n   * Create a new UpdatePlugin.\n   * @param {TDLib.Rooms.Room} room - The room in which the layer manager operates.\n   * @param {Phaser.Plugins.PluginManager} pluginManager - A reference to the plugin manager.\n   */\n  constructor(room, pluginManager) {\n    super(room, pluginManager);\n  }\n\n  /**\n   * Boot the plugin.\n   * @since 1.0.0\n   */\n  boot() {\n    const events = this.systems.events;\n\n    this.gameObjects = new Phaser.Structs.Set();\n\n    events.on('update', this._sceneUpdate, this);\n    events.on('shutdown', this._sceneShutdown, this);\n    events.once('destroy', this._sceneDestroy, this);\n  }\n\n  /**\n   * Update every game object.\n   * @param {*} time\n   * @param {*} delta\n   * @private\n   * @since 1.0.0\n   */\n  _sceneUpdate(time, delta) {\n    this.gameObjects.iterateLocal('update', time, delta);\n  }\n\n  /**\n   * Called at the shutdown of the scene.\n   * @private\n   * @since 1.0.0\n   */\n  _sceneShutdown() {\n    this.gameObjects.clear();\n  }\n\n  /**\n   * Called when the scene is destroyed.\n   * @private\n   * @since 1.0.0\n   */\n  _sceneDestroy() {\n    const events = this.systems.events;\n\n    events.off('update', this._scenePostUpdate, this);\n    events.off('shutdown', this._sceneShutdown, this);\n    events.off('destroy', this._sceneDestroy, this);\n\n    this.gameObjects = null;\n    this.scene = null;\n    this.systems = null;\n  }\n\n  /**\n   * Add an object to the global update loop of the game.\n   * @param {TDLib.Sprites.TDLSprite} obj - The object to add to the update loop.\n   * @since 1.0.0\n   */\n  add(obj) {\n    obj.once('destroy', this.remove, this);\n    this.gameObjects.set(obj);\n  }\n\n  /**\n   * Add multiple objects to the global update loop of the game.\n   * @param {TDLib.Sprites.TDLSprite[]} obj - The objects to add to the update loop.\n   * @since 1.0.0\n   */\n  addMultiple(objs) {\n    objs.forEach(this.add, this);\n  }\n\n  /**\n   * Remove an object from the global update loop of the game.\n   * @param {TDLib.Sprites.TDLSprite} obj - The object to remove from the update loop.\n   * @since 1.0.0\n   */\n  remove(obj) {\n    obj.off('destroy', this.remove, this);\n    this.gameObjects.delete(obj);\n  }\n}\n","import Settings from '../boot/Settings';\nimport Utils from './Utils';\n\n/**\n * The rooms namespace.\n * @namespace TDLib.Rooms\n * @since 1.0.0\n */\n\n/**\n * Class representing a TDLRoom.\n * @extends Phaser.Scene\n * @memberof TDLib.Rooms\n * @since 1.0.0\n */\nexport default class Room extends Phaser.Scene {\n  /**\n   * Create a new TDLRoom.\n   * @param {string} sceneKey - The unique key to identify the room.\n   * @param {Object} rawAssets - The raw object of assets needed by the room. (Ripensarlo ?)\n   */\n  constructor(sceneKey, rawAssets) {\n    super(sceneKey);\n\n    /**\n       * This object contains an array with all the assets needed by the room.\n       * @type {Object}\n       * @since 1.0.0\n       */\n    this.assets = { raw: rawAssets, array: [] };\n\n    /**\n       * The average contribute of light sources to the room.\n       * @type {number}\n       * @since 1.0.0\n       */\n    this.averageLightsContribute;\n\n    /**\n       * The Settings cursor manager.\n       * @type {TDLib.Plugins.SettingsPlugins.CursorManager}\n       * @since 1.0.0\n       */\n    this.cursors;\n\n    /**\n       * The layer manager of the room.\n       * @type {TDLib.Plugins.RoomPlugins.LayerManager}\n       * @since 1.0.0\n       */\n    this.layers;\n\n    /**\n       * The tilemap of the room.\n       * @type {Phaser.Tilemaps.Tilemap}\n       * @since 1.0.0\n       */\n    this.map;\n\n    /**\n       * The name of the room.\n       * @type {string}\n       * @since 1.0.0\n       */\n    this.name = this.constructor.name;\n\n    /**\n       * The instance of the TDLCharacter designated as player for the room.\n       * @type {TDLib.Sprites.Characters.TDLCharacter}\n       * @since 1.0.0\n       */\n    this.player;\n\n    /**\n       * The Settings room manager.\n       * @type {TDLib.Plugins.SettingsPlugins.RoomManager}\n       * @since 1.0.0\n       */\n    this.rooms;\n  }\n\n  /**\n   * The preload function is executed once and load all the assets needed by the room.\n   * @since 1.0.0\n   */\n  preload() {\n    this._scrapeAssets();\n    this.assets.array.forEach(obj => {\n      if ('nPath' in obj) {\n        this.load[obj.type](obj.key, [obj.path, obj.nPath]);\n      } else if ('bPath' in obj) {\n        this.load[obj.type](obj.key, obj.path);\n        this.load[obj.type](obj.key + '_b', obj.bPath);\n      } else {\n        this.load[obj.type](obj.key, obj.path);\n      }\n    });\n\n    // Loading Border Camera Masks\n    this.load.image('top-border-mask-camera', 'assets/Masks/topMaskCamera.png');\n    this.load.image('bottom-border-mask-camera', 'assets/Masks/bottomMaskCamera.png');\n    this.load.image('left-border-mask-camera', 'assets/Masks/leftMaskCamera.png');\n    this.load.image('right-border-mask-camera', 'assets/Masks/rightMaskCamera.png');\n  }\n\n  /**\n   * Scrape the object of raw assets.\n   * @private\n   * @since 1.0.0\n   */\n  _scrapeAssets() {\n    for (let type in this.assets.raw) {\n      Utils.scrapeComplexObjKey(\n        this.assets.raw[type],\n        { type: type },\n        'path',\n        (obj, params) => {\n          obj['type'] = params.type;\n          obj['key'] = Utils.findFileNameFromPath(obj.path);\n          this.assets.array.push(obj);\n        }\n      );\n    }\n  }\n\n  /**\n   * The create function is executed once, when the room is initialized.\n   * @param {TDLib.Sprites.Characters.TDLCharacter} player - The instance of the player for the room.\n   * @since 1.0.0\n   */\n  create(player) {\n    this.player = player.setName('player');\n    this.lights.enable(); // Boot Phaser's LightManager\n    // this.scene.bringToTop(CursorManager.CURSOR_SCENE_KEY); // Add the cursor to the Room\n    this.scene.bringToTop('CursorScene');\n\n    this._setCameraViewport();\n    this._createRoom();\n    this._createSprites();\n    this._applyBorderMasks();\n    this.layers.setLayersDepth();\n\n    // Camera bounds, anche il wallsLayer\n    this.cameras.main.setBounds(0, 0, this.layers.wallsLayer.width, this.layers.wallsLayer.height);\n    this.cameras.main.startFollow(this.player);\n    this.cameras.main.setRoundPixels(true);\n    // Physics Bounds, sar solo lo spazio di gioco (togliamo il wall layer tutto attorno!!)\n    this.physics.world.setBounds(\n      Settings.TILE_SIZE, Settings.TILE_SIZE, this.layers.wallsLayer.width - 2 * Settings.TILE_SIZE,\n      this.layers.wallsLayer.height - 2 * Settings.TILE_SIZE\n    );\n  }\n\n  /**\n   * Set the correct camera viewport.\n   * @private\n   * @since 1.0.0\n   */\n  _setCameraViewport() {\n    if (Settings.DEVICE === 'MOBILE') {\n      this.cameras.main.setPosition(\n        (Settings.ROOM_FRAME_IN_TILES_MOBILE + Settings.INVENTORY_WIDTH_IN_TILES_MOBILE) * Settings.TILE_SIZE,\n        (Settings.ROOM_FRAME_IN_TILES_MOBILE + Settings.INVENTORY_HEIGHT_IN_TILES_MOBILE) * Settings.TILE_SIZE\n      );\n      this.cameras.main.setSize(\n        Settings.SCREEN_PROPS.calculatedWidth - 2 * (Settings.ROOM_FRAME_IN_TILES_MOBILE + Settings.INVENTORY_WIDTH_IN_TILES_MOBILE) * Settings.TILE_SIZE,\n        Settings.ROOM_HEIGHT_IN_TILE * Settings.TILE_SIZE\n      );\n    } else {\n      this.cameras.main.setPosition(\n        Settings.ROOM_FRAME_IN_TILES_DESKTOP * Settings.TILE_SIZE,\n        Settings.ROOM_FRAME_IN_TILES_DESKTOP * Settings.TILE_SIZE\n      );\n      this.cameras.main.setSize(\n        Settings.SCREEN_PROPS.calculatedWidth - 2 * Settings.ROOM_FRAME_IN_TILES_DESKTOP * Settings.TILE_SIZE,\n        Settings.ROOM_HEIGHT_IN_TILE * Settings.TILE_SIZE\n      );\n    }\n  }\n\n  /**\n   * Create room tilemap and layers.\n   * @private\n   * @since 1.0.0\n   */\n  _createRoom() {\n    this.map = this.make.tilemap({\n      key: Utils.findFileNameFromPath(this.assets.raw.tilemapTiledJSON.path),\n      tileWidth: Settings.TILE_SIZE,\n      tileHeight: Settings.TILE_SIZE\n    });\n\n    this.layers.backgroundLayer = this.map.createDynamicLayer(\n      'backgroundLayer',\n      this.map.addTilesetImage(Utils.findFileNameFromPath(this.assets.raw.image.tiles.background.path)),\n      0, 0\n    );// .setPipeline('Light2D');\n    this.layers.wallsLayer = this.map.createDynamicLayer(\n      'wallsLayer',\n      this.map.addTilesetImage(Utils.findFileNameFromPath(this.assets.raw.image.tiles.walls.path)),\n      0, 0\n    );\n    this.layers.wallsMaskLayer = this.map.createDynamicLayer(\n      'wallsMaskLayer',\n      this.map.addTilesetImage(Utils.findFileNameFromPath(this.assets.raw.image.tiles.walls.bPath)),\n      0, 0\n    );\n  }\n\n  /**\n   * Create all the objects present in Tiled JSON map.\n   * @private\n   * @since 1.0.0\n   */\n  _createSprites() {\n    let _this = this;\n\n    this.map.objects.forEach(layer => {\n      layer.objects.forEach(element => {\n        _this;\n        this[element.name] = eval('new ' + element.type + '(_this,' + (element.x + element.width / 2) + ', ' + (element.y - element.height / 2) + ');');\n        this[element.name].setName(element.name);\n      });\n    });\n  }\n\n  /**\n   * Apply the four border masks to the camera.\n   * @private\n   * @since 1.0.0\n   */\n  _applyBorderMasks() {\n    this.layers.borderMasksLayer.create(0,\n      0,\n      'top-border-mask-camera'\n    ).setScrollFactor(0).setOrigin(0, 0);\n\n    this.layers.borderMasksLayer.create(0,\n      0,\n      'left-border-mask-camera'\n    ).setScrollFactor(0).setOrigin(0, 0);\n\n    this.layers.borderMasksLayer.create(\n      this.cameras.main.width - Settings.TILE_SIZE,\n      0,\n      'right-border-mask-camera'\n    ).setScrollFactor(0).setOrigin(0, 0);\n\n    this.layers.borderMasksLayer.create(\n      0,\n      this.cameras.main.height - Settings.TILE_SIZE,\n      'bottom-border-mask-camera'\n    ).setScrollFactor(0).setOrigin(0, 0);\n  }\n\n  /**\n   * The update function is executed at every cycle of the game loop.\n   * @since 1.0.0\n   */\n  update() {\n    this._updateMasksByLightDiffusion();\n\n    // Updates all Actions in  every ActionComponent (if present)\n    this.children.list.forEach(element => {\n      if ('actions' in element) {\n        element.actions.update();\n      }\n    });\n  }\n\n  /**\n   * Update the border masks alpha according to the average diffused light in the room.\n   * @private\n   * @since 1.0.0\n   */\n  _updateMasksByLightDiffusion() {\n    this.averageLightsContribute = this.lightSources.calculateAverageLightsContribute();\n    this.layers.wallsMaskLayer.setAlpha(1 - this.averageLightsContribute);\n  }\n}\n\n","const Utils = {\n  scrapeComplexObjKey: (obj, params, searchKey, callback) => {\n    if (Array.isArray(obj)) {\n      for (let i = 0; i < obj.length; i++) {\n        Utils.scrapeComplexObjKey(obj[i], params, searchKey, callback);\n      }\n    } else if (obj !== null && typeof obj === 'object') {\n      if (searchKey in obj) {\n        callback(obj, params);\n      } else {\n        for (let prop in obj) {\n          Utils.scrapeComplexObjKey(obj[prop], params, searchKey, callback);\n        }\n      }\n    }\n  },\n  findFileNameFromPath: (path) => {\n    let nameFirstCharachterPosition = path.lastIndexOf('/') + 1;\n    let nameLastCharachterPosition = path.lastIndexOf('.');\n\n    if (nameFirstCharachterPosition === -1) nameFirstCharachterPosition = 0;\n    if (nameLastCharachterPosition === -1) return -1;\n    let filename = path.slice(nameFirstCharachterPosition, nameLastCharachterPosition);\n\n    return filename;\n  }\n};\n\nmodule.exports = Utils;\n","const Rooms = {\n  Room: require('./Room')\n};\n\nmodule.exports = Rooms;\n","import Behaviours from '../behaviours';\nimport Components from '../components';\n\n/**\n * The Darkest Lib.\n * @namespace TDLib\n * @since 1.0.0\n */\n\n/**\n * The actions namespace.\n * @namespace TDLib.Sprites\n * @since 1.0.0\n */\n\n/**\n * Class representing a TDLSprite.\n * @extends Phaser.Physics.Arcade.Sprite\n * @memberof TDLib.Sprites\n * @since 1.0.0\n */\nexport default class Sprite extends Phaser.Physics.Arcade.Sprite {\n  /**\n   * Create a TDLSprite.\n   * @param {TDLib.Rooms.TDLRoom} room - The room where the sprite is created.\n   * @param {number} x - The sprite x coordinate.\n   * @param {number} y - The sprite y coordinate.\n   * @param {string} texture - The graphic of the sprite.\n   * @param {string} [layer=null] - The key of the layer which will contain the sprite.\n   * @param {boolean} [hasBody=true] - Specify if the sprite has physics.\n   * @param {string} [behaviourType=SpriteBehaviour.INERT] - Specify the behaviour of the sprite.\n   * @param {Object} [pixelPerfect=null] - If not null enable the pixel perfect pointer hit for the sprite.\n   * @param {boolean} [pixelPerfect.alphaTolerance] - The alpha tolerance threshold value.\n   * @param {string|string[]} [observeText] - The text which appears when observing the sprite.\n   * @param {string|string[]} [examineOrInteractText] -  The text which appears when examine or interact with the sprite.\n   * @param {string} [blockExamineText=null] - If not null it's the blocking text which appears the first time the sprite is examined.\n   * @param {string|string[]} [noLightObserveText] -  The text which appears when observing the sprite when the diffused light is not sufficient.\n   * @param {string|string[]} [noLightExamineOrInteractText] - The text which appears when examine or interact with the sprite when the diffused light is not sufficient.\n   * @param {number} [examineOrInteractOffsetX=0] - The offset on x axis of the examineOrInteractPoint, where the player has to move to examine or interact with the sprite.\n   * @param {number} [examineOrInteractThresholdRadius=0] - The radius of the tolerance in reaching the examineOrInteractPoint, where the player has to move to examine or interact with the sprite.\n   * @param {number} [minLightLevelToExamineOrInteract=???] - The minimum value of diffused light to examine or interact with the sprite.\n   * @param {number} [minLightLevelToObserve=???] - The minimum value of diffused light to observe the sprite.\n   * @param {boolean} [precisePosition=false] - Specify if to examine or interact with the sprite it's required to be precisely at the examineOrInteractPoint. (Probably not needed)\n   */\n  constructor(\n    room,\n    x, y,\n    texture,\n    layer = null,\n    hasBody = true,\n    behaviourType = Behaviours.INERT,\n    pixelPerfect = null,\n    observeText = Behaviours.DEFAULT_OBSERVE_TEXT,\n    examineOrInteractText = Behaviours.DEFAULT_EXAMINE_OR_INTERACT_TEXT,\n    blockExamineText = null,\n    noLightObserveText = Behaviours.DEFAULT_NO_LIGHT_OBSERVE_TEXT,\n    noLightExamineOrInteractText = Behaviours.DEFAULT_NO_LIGHT_EXAMINE_OR_INTERACT_TEXT,\n    examineOrInteractOffsetX = 0,\n    examineOrInteractThresholdRadius = 0,\n    minLightLevelToExamineOrInteract = Behaviours.DEFAULT_MIN_LIGHT_LEVEL_TO_EXAMINE_OR_INTERACT,\n    minLightLevelToObserve = Behaviours.DEFAULT_MIN_LIGHT_LEVEL_TO_OBSERVE\n\n  ) {\n    super(room, x, y, texture);\n\n    /**\n     * The room where the sprite is created.\n     * @type {TDLib.Rooms.TDLRoom}\n     * @since 1.0.0\n     */\n    this.room = room;\n\n    /**\n     * The name of the sprite, to map it in the room. Usually it's obtained by Tiled.\n     * @type {string}\n     * @since 1.0.0\n     */\n    this.name;\n\n    /**\n     * The unique key of the sprite, composed by the sprite type and a 4 digits random integer number.\n     * @type {string}\n     * @since 1.0.0\n     */\n    this.key = this.constructor.name + (Math.floor(Math.random() * (9999 - 1000 + 1)) + 1000);\n\n    /**\n     * The type of the sprite.\n     * @type {string}\n     * @since 1.0.0\n     */\n    this.type = this.constructor.name;\n\n    /**\n     * The sprite behaviour component instance.\n     * @type {TDLib.Components.SpriteBehaviourComponent}\n     * @since 1.0.0\n     */\n    this.behaviour = new Components.BehaviourComponent(this, behaviourType, pixelPerfect);\n\n    /**\n     * The text which appears when observing the sprite.\n         * @type {string}\n         * @since 1.0.0\n     */\n    this.observeText = observeText;\n\n    /**\n * The text which appears when examine or interact with the sprite.\n     * @type {string}\n     * @since 1.0.0\n */\n    this.examineOrInteractText = examineOrInteractText;\n\n    /**\n     * If not null it's the blocking text which appears the first time the sprite is examined.\n         * @type {string}\n         * @since 1.0.0\n     */\n    this.blockExamineText = blockExamineText;\n\n    /**\n     * The text which appears when observing the sprite when the diffused light is not sufficient.\n         * @type {string}\n         * @since 1.0.0\n     */\n    this.noLightObserveText = noLightObserveText;\n\n    /**\n * The text which appears when examine or interact with the sprite when the diffused light is not sufficient.\n     * @type {string}\n     * @since 1.0.0\n     */\n    this.noLightExamineOrInteractText = noLightExamineOrInteractText;\n\n    /**\n     * The offset on x axis of the examineOrInteractPoint, where the player has to move to examine or interact with the sprite.\n         * @type {number}\n         * @since 1.0.0\n     */\n    this.examineOrInteractOffsetX = examineOrInteractOffsetX;\n\n    /**\n     * The radius of the tolerance in reaching the examineOrInteractPoint, where the player has to move to examine or interact with the sprite.\n         * @type {number}\n         * @since 1.0.0\n         */\n    this.examineOrInteractThresholdRadius = examineOrInteractThresholdRadius;\n\n    /**\n     * The minimum value of diffused light to examine or interact with the sprite.\n         * @type {number}\n         * @since 1.0.0\n         */\n    this.minLightLevelToExamineOrInteract = minLightLevelToExamineOrInteract;\n\n    /**\n * The minimum value of diffused light to observe the sprite.\n     * @type {number}\n     * @since 1.0.0\n     */\n    this.minLightLevelToObserve = minLightLevelToObserve;\n\n    this.room.add.existing(this);\n    this.room.updates.add(this);\n    if (hasBody) {\n      this.room.physics.add.existing(this);\n      this.setCollideWorldBounds(true);\n      this.setGravityY(10000);\n    }\n\n    if (layer != null) {\n      if (layer in this.room.layers) {\n        this.room.layers[layer].add(this);\n        this.room.layers.setLayersDepth();\n      } else console.warn('ALERT: layer not found for object', this);\n    }\n\n    this.create();\n  }\n\n  /**\n   * The create function is executed once, immediately after the initialization of the sprite.\n   * @since 1.0.0\n   */\n  create() {\n    console.log('Created:', this.key, '- Type:', this.type, '- Behaviour:', this.behaviour.type);\n  }\n\n  /**\n   * The update is executed at every cycle of the game loop.\n   * @since 1.0.0\n   */\n  update() {\n\n  }\n\n  /**\n   * Set the name property of a sprite.\n   * @param {string} value - The name which is used to map a sprite in the room.\n   * @return {TDLib.Sprites.TDLSprite}\n   * @since 1.0.0\n   */\n  setName(value) {\n    this.name = value;\n    return this;\n  }\n\n  // Poich  stata aggiunta la pixel perfect collision, valutare l'utilit di questa funzione!\n  setHitAreaSize(width = this.width, height = this.height, offsetX = 0, offsetY = 0) {\n    this.input.hitArea.setSize(width, height);\n    this.input.hitArea.setPosition(((this.width - width) / 2) + offsetX, ((this.height - height) / 2) + offsetY);\n  }\n}\n","import Sprite from '../Sprite';\nimport Behaviour from '../../behaviours';\nimport Components from '../../components';\nimport CONST from '../../const';\n\n/**\n * The characters namespace.\n * @namespace TDLib.Sprites.Characters\n * @since 1.0.0\n */\n\n/**\n * Class representing a Character.\n * @extends TDLib.Sprites.Sprite\n * @memberof TDLib.Sprites.Characters\n * @since 1.0.0\n */\nexport default class Character extends Sprite {\n  /**\n   * Create a new Character.\n   * @param {Room} room - The room where the character is created.\n   * @param {number} x - The x coordinate of the character.\n   * @param {number} y - The y coordinate of the character.\n   * @param {string} texture - The character's graphic.\n   * @param {string} layer - The character's layer.\n   */\n  constructor(room, x, y, texture, layer) {\n    super(...arguments, true, Behaviour.INTERACTIVE, { alphaTolerance: 1 });\n\n    /**\n     * The ActionComponent for this character.\n     * @type {Components.ActionComponent}\n     * @since 1.0.0\n     */\n    this.actions = new Components.ActionComponent(this);\n\n    /**\n     * The facing of the character.\n     * @type {TDLCharacter.FACING}\n     * @since 1.0.0\n     */\n    this.facing = CONST.RIGHT;\n  }\n\n  create() {\n    super.create();\n    // this.setPipeline('Light2D');\n  }\n}\n","const Characters = {\n  NPCharacter: require('./npc-characters/NPCharacter'),\n  Player: require('./players/Player')\n};\n\nmodule.exports = Characters;\n","import Character from '../Character';\n\nexport default class NPCharacter extends Character {\n  constructor(room, x, y, texture, layer) {\n    super(room, x, y, texture, layer);\n  }\n}\n","import Character from '../Character';\n\nexport default class Player extends Character {\n  constructor(room, x, y, texture) {\n    super(room, x, y, texture, 'playerLayer');\n\n    this.isBlocked = false;\n  }\n\n  create() {\n    super.create();\n\n    this.room.input.on('pointerdown', function (pointer) {\n      this.room.cursors.pointerDown(this);\n    }, this);\n  }\n}\n","const Sprites = {\n  Characters: require('./characters'),\n  InventoryItems: require('./inventory-items'),\n  WorldItems: require('./world-items'),\n  Sprite: require('./Sprite')\n};\n\nmodule.exports = Sprites;\n","import Sprite from '../Sprite';\n\n/**\n * The inventory items namespace.\n * @namespace TDLib.Sprites.InventoryItems\n * @since 1.0.0\n */\n\n/**\n * Class representing an InentoryItem.\n * @extends TDLib.Sprites.Sprite\n * @memberof TDLib.Sprites.InventoryItems\n * @since 1.0.0\n */\n\nexport default class InentoryItem extends Sprite {\n  /**\n   * Create a new InvetoryItem.\n   * @param {Room} room - The room where the item is created.\n   * @param {number} x - The x coordinate of the item.\n   * @param {number} y - The y coordinate of the item.\n   * @param {string} texture - The item's graphic.\n   * @param {string} layer - The item's layer.\n   */\n  constructor(room, x, y, texture, layer) {\n    super(...arguments, false);\n  }\n\n  create() {\n    super.create();\n  }\n}\n","const InventoryItems = {\n  InventoryItem: require('./InventoryItem')\n};\n\nmodule.exports = InventoryItems;\n","import Sprite from '../Sprite';\n\n/**\n * The world items namespace.\n * @namespace TDLib.Sprites.WorldItems\n * @since 1.0.0\n */\n\n/**\n * Class representing a WorldItem.\n * @extends TDLib.Sprites.Sprite\n * @memberof TDLib.Sprites.WorldItems\n * @since 1.0.0\n */\nexport default class WorldItem extends Sprite {\n  /**\n   * Create a WorldObject.\n   * @param {TDLib.Rooms.TDLRoom} room - The room where the sprite is created.\n   * @param {number} x - The sprite x coordinate.\n   * @param {number} y - The sprite y coordinate.\n   * @param {string} texture - The graphic of the sprite.\n   * @param {string} [layer=null] - The key of the layer which will contain the sprite.\n   * @param {boolean} [hasBody=true] - Specify if the sprite has physics.\n   * @param {string} [behaviourType=SpriteBehaviour.INERT] - Specify the behaviour of the sprite.\n   * @param {Object} [pixelPerfect=null] - If not null enable the pixel perfect pointer hit for the sprite.\n   * @param {boolean} [pixelPerfect.alphaTolerance] - The alpha tolerance threshold value.\n   * @param {string|string[]} [observeText] - The text which appears when observing the sprite.\n   * @param {string|string[]} [examineOrInteractText] -  The text which appears when examine or interact with the sprite.\n   * @param {string} [blockExamineText=null] - If not null it's the blocking text which appears the first time the sprite is examined.\n   * @param {string|string[]} [noLightObserveText] -  The text which appears when observing the sprite when the diffused light is not sufficient.\n   * @param {string|string[]} [noLightExamineOrInteractText] - The text which appears when examine or interact with the sprite when the diffused light is not sufficient.\n   * @param {number} [examineOrInteractOffsetX=0] - The offset on x axis of the examineOrInteractPoint, where the player has to move to examine or interact with the sprite.\n   * @param {number} [examineOrInteractThresholdRadius=0] - The radius of the tolerance in reaching the examineOrInteractPoint, where the player has to move to examine or interact with the sprite.\n   * @param {number} [minLightLevelToExamineOrInteract=???] - The minimum value of diffused light to examine or interact with the sprite.\n   * @param {number} [minLightLevelToObserve=???] - The minimum value of diffused light to observe the sprite.\n   */\n  constructor(room, x, y, texture, layer, hasBody, behaviourType, pixelPerfect, observeText, examineOrInteractText, blockExamineText, noLightObserveText, noLightExamineOrInteractText, examineOrInteractOffsetX, examineOrInteractThresholdRadius, minLightLevelToExamineOrInteract, minLightLevelToObserve) {\n    super(\n      room,\n      x, y,\n      texture,\n      layer,\n      hasBody,\n      behaviourType,\n      pixelPerfect,\n      observeText,\n      examineOrInteractText,\n      blockExamineText,\n      noLightObserveText,\n      noLightExamineOrInteractText,\n      examineOrInteractOffsetX,\n      examineOrInteractThresholdRadius,\n      minLightLevelToExamineOrInteract,\n      minLightLevelToObserve\n    );\n  }\n\n  create() {\n    super.create();\n    this.setPipeline('Light2D'); // Da spostare in TDLSprite non appena il player supporter la Light2D\n  }\n}\n","const WorldItems = {\n  WorldItem: require('./WorldItem'),\n  LightSources: require('./light-sources'),\n  RoomFurnitures: require('./room-furnitures'),\n  WallFurnitures: require('./wall-furnitures')\n};\n\nmodule.exports = WorldItems;\n","import WorldItem from '../WorldItem';\nimport Behaviours from '../../../behaviours';\n\nexport default class LightSource extends WorldItem {\n  /**\n   * constructor of the class\n   * @param {Room} room - Room in which will be created the LightSource.\n   * @param {number} x - X position of the sprite.\n   * @param {number} y - Y position of the sprite.\n   * @param {string} texture - Name of the sprite for the LightSource.\n   * @param {string} layer - Name of the Layer in which will be put the LightSource.\n   * @param {Object} graphicLightConfig - Configuration of the graphic light of the LightSource.\n   * @param {number} graphicLightConfig.intensity - Intensity of the graphic light.\n   * @param {number} graphicLightConfig.radius - Radius of the graphic light.\n   * @param {Object} diffusedLightConfig - Configuration of the diffused light of the LightSource.\n   * @param {number} diffusedLightConfig.intensity - Intensity of the diffused light.\n   * @param {number} diffusedLightConfig.radius - Radius of the diffused light.\n   * @param {Object} offset - Offset of the graphic light respect the center of the sprite.\n   * @param {number} offset.x - X offset.\n   * @param {number} offset.y - Y offset.\n   * @param {Array} allowedBehaviours - List of names of the allowed Behaviour for this light\n   * @param {boolean} [isOn=true] - Light created as switched on or off.\n   */\n  constructor(room, x, y, texture, layer, graphicLightConfig, diffusedLightConfig, offset, allowedBehaviours, isOn = true) {\n    super(room, x, y, texture, layer, true, Behaviours.EXAMINABLE);\n\n    this.setGravityY(0);\n\n    this.initialConfig = {\n      graphicLight: graphicLightConfig,\n      diffusedLight: diffusedLightConfig,\n      offset: offset\n    };\n\n    this.config = this.initialConfig;\n\n    this.isOn = false;\n    if (isOn) {\n      this.turnOn();\n    }\n\n    // Register this LightSource instance to the Room's LightManager\n    this.room.lightSources.add(this);\n    this.lightBehaviour = new LightSourceBehaviourComponent(this, allowedBehaviours);\n  }\n\n  /**\n   * Turn on the lights of the LightSource by creating new ones.\n   */\n  turnOn() {\n    if (!this.isOn) {\n      if (this.initialConfig.diffusedLight !== null) {\n        this.diffusedLight = this.room.lights.addLight(this.x + this.initialConfig.offset.x, this.y + this.initialConfig.offset.y, this.initialConfig.diffusedLight.radius).setIntensity(this.initialConfig.diffusedLight.intensity);\n        this.room.lightSources.diffusedLights.push(this.diffusedLight);\n      }\n\n      if (this.initialConfig.graphicLight !== null) {\n        this.graphicLight = this.room.lights.addLight(this.x + this.initialConfig.offset.x, this.y + this.initialConfig.offset.y, this.initialConfig.graphicLight.radius).setIntensity(this.initialConfig.graphicLight.intensity);\n        this.room.lightSources.graphicLights.push(this.graphicLight);\n      }\n\n      this.isOn = true;\n    }\n  }\n\n  /**\n     * Turn off the lights of the LightSource by deleting the existing ones.\n     * @param {boolean} [stopBehaviours=true] - If true, turning off the light stops all the behaviours.\n     */\n  turnOff(stopBehaviours = true) {\n\n    if (stopBehaviours) this.lightBehaviour.stopAllBehaviours();\n    if (this.isOn) {\n      let diffusedLightindex = this.room.lightSources.diffusedLights.indexOf(this.diffusedLight);\n\n      if (diffusedLightindex > -1) {\n        this.room.lightSources.diffusedLights.splice(diffusedLightindex, 1);\n        this.room.lights.removeLight(this.diffusedLight);\n      }\n\n      let graphicLightindex = this.room.lightSources.graphicLights.indexOf(this.graphicLight);\n\n      if (graphicLightindex > -1) {\n        this.room.lightSources.graphicLights.splice(graphicLightindex, 1);\n        this.room.lights.removeLight(this.graphicLight);\n      }\n\n      this.isOn = false;\n    }\n  }\n\n  /**\n   * If the light source is on, turn it off and vice versa.\n   */\n  switch() {\n    if (this.isOn) this.turnOff();\n    else this.turnOn();\n  }\n}\n","const LightSources = {\n  LightSource: require('./LightSource')\n};\n\nmodule.exports = LightSources;\n","import WorldItem from '../WorldItem';\n\n/**\n * The room furnitures namespace.\n * @namespace TDLib.Sprites.Objects.WorldObjects.RoomFurnitures\n * @since 1.0.0\n */\n\n/**\n * Class representing a RoomFurniture.\n * @extends TDLib.Sprites.Objects.WorldObjects.WorldObject\n * @memberof TDLib.Sprites.Objects.WorldObjects.RoomFurnitures\n * @since 1.0.0\n */\nexport default class RoomFurniture extends WorldItem {\n  /**\n   * Create a RoomFurniture.\n   * @param {TDLib.Rooms.TDLRoom} room - The room where the sprite is created.\n   * @param {number} x - The sprite x coordinate.\n   * @param {number} y - The sprite y coordinate.\n   * @param {string} texture - The graphic of the sprite.\n   * @param {string} [behaviourType=SpriteBehaviour.INERT] - Specify the behaviour of the sprite.\n   * @param {Object} [pixelPerfect=null] - If not null enable the pixel perfect pointer hit for the sprite.\n   * @param {boolean} [pixelPerfect.alphaTolerance] - The alpha tolerance threshold value.\n   * @param {string|string[]} [observeText] - The text which appears when observing the sprite.\n   * @param {string|string[]} [examineOrInteractText] -  The text which appears when examine or interact with the sprite.\n   * @param {string} [blockExamineText=null] - If not null it's the blocking text which appears the first time the sprite is examined.\n   * @param {string|string[]} [noLightObserveText] -  The text which appears when observing the sprite when the diffused light is not sufficient.\n   * @param {string|string[]} [noLightExamineOrInteractText] - The text which appears when examine or interact with the sprite when the diffused light is not sufficient.\n   * @param {number} [examineOrInteractOffsetX=0] - The offset on x axis of the examineOrInteractPoint, where the player has to move to examine or interact with the sprite.\n   * @param {number} [examineOrInteractThresholdRadius=0] - The radius of the tolerance in reaching the examineOrInteractPoint, where the player has to move to examine or interact with the sprite.\n   * @param {number} [minLightLevelToExamineOrInteract=???] - The minimum value of diffused light to examine or interact with the sprite.\n   * @param {number} [minLightLevelToObserve=???] - The minimum value of diffused light to observe the sprite.\n   */\n  constructor(room, x, y, texture, behaviourType, pixelPerfect, observeText, examineOrInteractText, blockExamineText, noLightObserveText, noLightExamineOrInteractText, examineOrInteractOffsetX, examineOrInteractThresholdRadius, minLightLevelToExamineOrInteract, minLightLevelToObserve) {\n    super(\n      room,\n      x, y,\n      texture,\n      'roomFurnitureLayer',\n      true,\n      behaviourType,\n      pixelPerfect,\n      observeText,\n      examineOrInteractText,\n      blockExamineText,\n      noLightObserveText,\n      noLightExamineOrInteractText,\n      examineOrInteractOffsetX,\n      examineOrInteractThresholdRadius,\n      minLightLevelToExamineOrInteract,\n      minLightLevelToObserve\n    );\n  }\n}\n","const RoomFurnitures = {\n  RoomFurniture: require('./RoomFurniture')\n};\n\nmodule.exports = RoomFurnitures;\n","import WorldItem from '../WorldItem';\n\n/**\n * The wall furnitures namespace.\n * @namespace TDLib.Sprites.Objects.WorldObjects.WallFurnitures\n * @since 1.0.0\n */\n\n/**\n * Class representing a WallFurniture.\n * @extends TDLib.Sprites.Objects.WorldObjects.WorldObject\n * @memberof TDLib.Sprites.Objects.WorldObjects.WallFurnitures\n * @since 1.0.0\n */\nexport default class WallFurniture extends WorldItem {\n  /**\n   * Create a WallFurniture.\n   * @param {TDLib.Rooms.TDLRoom} room - The room where the sprite is created.\n   * @param {number} x - The sprite x coordinate.\n   * @param {number} y - The sprite y coordinate.\n   * @param {string} texture - The graphic of the sprite.\n   * @param {string} [behaviourType=SpriteBehaviour.INERT] - Specify the behaviour of the sprite.\n   * @param {Object} [pixelPerfect=null] - If not null enable the pixel perfect pointer hit for the sprite.\n   * @param {boolean} [pixelPerfect.alphaTolerance] - The alpha tolerance threshold value.\n   * @param {string|string[]} [observeText] - The text which appears when observing the sprite.\n   * @param {string|string[]} [examineOrInteractText] -  The text which appears when examine or interact with the sprite.\n   * @param {string} [blockExamineText=null] - If not null it's the blocking text which appears the first time the sprite is examined.\n   * @param {string|string[]} [noLightObserveText] -  The text which appears when observing the sprite when the diffused light is not sufficient.\n   * @param {string|string[]} [noLightExamineOrInteractText] - The text which appears when examine or interact with the sprite when the diffused light is not sufficient.\n   * @param {number} [examineOrInteractOffsetX=0] - The offset on x axis of the examineOrInteractPoint, where the player has to move to examine or interact with the sprite.\n   * @param {number} [examineOrInteractThresholdRadius=0] - The radius of the tolerance in reaching the examineOrInteractPoint, where the player has to move to examine or interact with the sprite.\n   * @param {number} [minLightLevelToExamineOrInteract=???] - The minimum value of diffused light to examine or interact with the sprite.\n   * @param {number} [minLightLevelToObserve=???] - The minimum value of diffused light to observe the sprite.\n   */\n  constructor(room, x, y, texture, behaviourType, pixelPerfect, observeText, examineOrInteractText, blockExamineText, noLightObserveText, noLightExamineOrInteractText, examineOrInteractOffsetX, examineOrInteractThresholdRadius, minLightLevelToExamineOrInteract, minLightLevelToObserve) {\n    super(\n      room,\n      x, y,\n      texture,\n      'wallFurnitureLayer',\n      true,\n      behaviourType,\n      pixelPerfect,\n      observeText,\n      examineOrInteractText,\n      blockExamineText,\n      noLightObserveText,\n      noLightExamineOrInteractText,\n      examineOrInteractOffsetX,\n      examineOrInteractThresholdRadius,\n      minLightLevelToExamineOrInteract,\n      minLightLevelToObserve\n    );\n\n    this.setGravityY(0);\n  }\n}\n","const WallFurnitures = {\n  WallFurniture: require('./WallFurniture')\n};\n\nmodule.exports = WallFurnitures;\n","import Actions from '../../actions';\nimport Behaviours from '../../behaviours';\n\n/**\n * Class representing the CursorSystem, able to select the correct graphic for the cursor and to handle pointer events.\n * @extends Phaser.Plugins.BasePlugin\n * @memberof TDLib.Plugins.GlobalPlugins\n * @since 1.0.0\n */\nexport default class CursorSystem extends Phaser.Plugins.BasePlugin {\n  /**\n   * Create a new CursorSystem.\n   * @param {Phaser.Plugins.PluginManager} pluginManager - A reference to the plugin manager.\n   */\n  constructor(pluginManager) {\n    super(pluginManager);\n\n    /**\n     * The scene containing the cursor.\n     * @type {CursorSystem.CURSOR_SCENE}\n     * @since 1.0.0\n     */\n    this.cursorScene;\n\n    /**\n     * The Scene Manager is a Game level system, responsible for creating, processing and updating all of the Scenes in a Game instance.\n     * @type {Phaser.Scenes.SceneManager}\n     * @since 1.0.0\n     */\n    this.sceneManager;\n\n    /**\n     * Save the last sprite who called the function setCursor().\n     * @type {TDLib.Sprites.TDLSprite}\n     * @since 1.0.0\n     */\n    this.lastTarget;\n  }\n\n  /**\n   * It's a Phaser.Scene representing the scene containing the cursor which will be put on the rooms level.\n   * @typedef {TDLib.Plugins.GlobalPlugins.CursorSystem.CursorScene}\n   * @extends {Phaser.Scenes.Scene}\n   * @since 1.0.0\n   */\n  static get CursorScene() {\n    return class CursorScene extends Phaser.Scene {\n      constructor() {\n        super(CursorSystem.CURSOR_SCENE_KEY);\n\n        this.cursor;\n      }\n\n      preload() {\n        this.load.image(CursorSystem.EXAMINABLE_CURSOR, 'assets/Cursors/CursorExamine.png');\n        this.load.image(CursorSystem.HOLD_CURSOR, 'assets/Cursors/CursorHold.png');\n        this.load.image(CursorSystem.INTERACTIVE_CURSOR, 'assets/Cursors/CursorInteract.png');\n        this.load.image(CursorSystem.DEFAULT_CURSOR, 'assets/Cursors/CursorMove.png');\n        this.load.image(CursorSystem.TALKABLE_CURSOR, 'assets/Cursors/CursorTalk.png');\n        this.load.image(CursorSystem.CHOICE_CURSOR, 'assets/Cursors/CursorChoice.png');\n        this.load.image(CursorSystem.CHOICE_PRESSED_CURSOR, 'assets/Cursors/CursorChoicePressed.png');\n      }\n\n      create() {\n        this.input.setDefaultCursor('none');\n        this.cursor = this.add.image(0, 0, CursorSystem.DEFAULT_CURSOR).setOrigin(0.4, 0.33).setDepth(100000);\n      }\n\n      update() {\n        this.cursor.setPosition(this.input.activePointer.x, this.input.activePointer.y);\n      }\n    };\n  }\n\n  /**\n   * The key of the scene containing the cursor.\n   * @type {string}\n   * @since 1.0.0\n   */\n  static get CURSOR_SCENE_KEY() {\n    return 'CursorScene';\n  }\n\n  /**\n   * The key of the inert cursor.\n   * @type {string}\n   * @since 1.0.0\n   */\n  static get DEFAULT_CURSOR() {\n    return 'cursorMove';\n  }\n\n  /**\n   * The key of the examine cursor.\n   * @type {string}\n   * @since 1.0.0\n   */\n  static get EXAMINABLE_CURSOR() {\n    return 'cursorExamine';\n  }\n\n  /**\n   * The key of the interact cursor.\n   * @type {string}\n   * @since 1.0.0\n   */\n  static get INTERACTIVE_CURSOR() {\n    return 'cursorInteract';\n  }\n\n  /**\n   * The key of the hold cursor.\n   * @type {string}\n   * @since 1.0.0\n   */\n  static get HOLD_CURSOR() {\n    return 'cursorHold';\n  }\n\n  /**\n   * The key of the talk cursor.\n   * @type {string}\n   * @since 1.0.0\n   */\n  static get TALKABLE_CURSOR() {\n    return 'cursorTalk';\n  }\n\n  /**\n   * The key of the choice cursor.\n   * @type {string}\n   * @since 1.0.0\n   */\n  static get CHOICE_CURSOR() {\n    return 'cursorChoice';\n  }\n\n  /**\n   * The key of the choice pressed cursor.\n   * @type {string}\n   * @since 1.0.0\n   */\n  static get CHOICE_PRESSED_CURSOR() {\n    return 'cursorChoicePressed';\n  }\n\n  /**\n   * Configure the cursor manager.\n   * @param {Phaser.Scenes.SceneManager} sceneManager - The Scene Manager is a Game level system, responsible for creating, processing and updating all of the Scenes in a Game instance.\n   * @since 1.0.0\n   */\n  configure(sceneManager) {\n    this.sceneManager = sceneManager;\n    this.cursorScene = this.sceneManager.add(CursorSystem.CURSOR_SCENE_KEY, CursorSystem.CursorScene, true);\n  }\n\n  /**\n   * Handle the pointer down event.\n   * @param {TDLib.Sprites.Characters.TDLCharacter} player - The current player.\n   * @since 1.0.0\n   */\n  pointerDown(player, pointer = null) {\n    if (!player.isBlocked) {\n      switch (this.cursorScene.cursor.texture.key) {\n        case CursorSystem.DEFAULT_CURSOR: {\n          if (typeof player.room.input.activePointer.camera !== 'undefined') player.actions.add(Actions.WalkTo, { target: { x: player.room.input.activePointer.worldX } });\n        }\n          break;\n\n        case CursorSystem.EXAMINABLE_CURSOR: {\n          this.lastTarget.behaviour.observe.abort();\n          player.actions.add(Actions.Examine, { target: this.lastTarget });\n        }\n          break;\n\n        case CursorSystem.INTERACTIVE_CURSOR: {\n          this.lastTarget.behaviour.observe.abort();\n          player.actions.add(Actions.Interact, { target: this.lastTarget });\n        }\n          break;\n\n        case CursorSystem.TALKABLE_CURSOR: {\n          player.actions.add(Actions.TalkTo, { target: this.lastTarget });\n        }\n          break;\n      }\n    }\n  }\n\n  /**\n   * Set the correct cursor for the target selected.\n   * @param {Object} target - The target of the pointer.sceneManager\n   * @param {TDLib.Components.ActionComponent} target.behaviour - The SpriteBehaviourComponent of the target.\n   * @param {string} [target.behaviour.type=TDLib.Sprites.Behaviours.INERT] - The type of the sprite behaviour for this target.\n   * @since 1.0.0\n   */\n  setCursor(target = { behaviour: { type: Behaviours.INERT }, room: {} }) {\n    if ('room' in target && target !== target.room.player) {\n      switch (target.behaviour.type) {\n        case Behaviours.INERT: {\n          this.cursorScene.cursor.setTexture(CursorSystem.DEFAULT_CURSOR).setOrigin(0.4, 0.33);\n        }\n          break;\n\n        case Behaviours.EXAMINABLE: {\n          this.cursorScene.cursor.setTexture(CursorSystem.EXAMINABLE_CURSOR).setOrigin(0.33, 0.29);\n        }\n          break;\n\n        case Behaviours.INTERACTIVE: {\n          this.cursorScene.cursor.setTexture(CursorSystem.INTERACTIVE_CURSOR).setOrigin(0.4, 0.33);\n        }\n          break;\n\n        case Behaviours.TALKABLE: {\n          this.cursorScene.cursor.setTexture(CursorSystem.TALKABLE_CURSOR);\n        }\n          break;\n      }\n\n      this.lastTarget = target;\n    }\n  }\n\n  /**\n   * Show the cursor.\n   * @since 1.0.0\n   */\n  showCursor() {\n    this.cursorScene.cursor.setVisible(true);\n  }\n\n  /**\n   * Hide the cursor.\n   * @since 1.0.0\n   */\n  hideCursor() {\n    this.cursorScene.cursor.setVisible(false);\n  }\n}\n","const Systems = {\n  CursorSystem: require('./cursors/CursorSystem'),\n  RoomSystem: require('./rooms/RoomSystem')\n};\n\nmodule.exports = Systems;\n","/**\n * Class representing the manager of the rooms\n * @extends Phaser.Plugins.BasePlugin\n * @memberof TDLib.Plugins.GlobalPlugins\n */\nexport default class RoomSystem extends Phaser.Plugins.BasePlugin {\n  /**\n   * Create a new RoomSystem.\n   * @param {Phaser.Plugins.PluginManager} pluginManager - A reference to the plugin manager.\n   */\n  constructor(pluginManager) {\n    super(pluginManager);\n\n    /**\n     * The Scene Manager is a Game level system, responsible for creating, processing and updating all of the Scenes in a Game instance.\n     * @type {Phaser.Scenes.SceneManager}\n     */\n    this.sceneManager = {};\n  }\n\n  /**\n   * Add (and start) a new room to the RoomSystem.\n   * @param {TDLib.Rooms.Room} room - The class of the new room to add.\n   * @param {boolean} [autoStart=true] - Specify if the room has to start.\n   */\n  add(room, autoStart = true) {\n    console.log('Added room:', room.name);\n    this.sceneManager.add(room.name, room, autoStart);\n  }\n\n  /**\n   * Configure the RoomSystem.\n   * @param {Phaser.Scenes.SceneManager} sceneManager - The Scene Manager is a Game level system, responsible for creating, processing and updating all of the Scenes in a Game instance.\n   */\n  configure(sceneManager) {\n    this.sceneManager = sceneManager;\n  }\n}\n","import Settings from '../boot/Settings';\n\nconst getScreenProps = () => {\n  var returnValue = {};\n\n  // cz : ah = 1 : mh\n  if (Settings.DEVICE === 'MOBILE') {\n    returnValue.availHeight = window.innerHeight;\n    returnValue.availWidth = window.innerWidth;\n    returnValue.calculatedZoom = Math.floor(returnValue.availHeight / ((Settings.ROOM_HEIGHT_IN_TILE + Settings.INVENTORY_HEIGHT_IN_TILES_MOBILE + Settings.ROOM_FRAME_IN_TILES_MOBILE * 2) * Settings.TILE_SIZE) * 100) / 100;\n  } else {\n    returnValue.availHeight = screen.height;\n    returnValue.availWidth = screen.width;\n    returnValue.calculatedZoom = Math.floor(returnValue.availHeight / ((Settings.ROOM_HEIGHT_IN_TILE + Settings.INVENTORY_HEIGHT_IN_TILES_DESKTOP + Settings.ROOM_FRAME_IN_TILES_DESKTOP * 2) * Settings.TILE_SIZE) * 100) / 100;\n  }\n\n  console.log('ZOOM: ' + returnValue.calculatedZoom);\n\n  // Sono le dimensioni riaggiustate rispetto allo zoom scelto\n  // ch : ah = 1 : cz\n  returnValue.calculatedHeight = Math.ceil(returnValue.availHeight / returnValue.calculatedZoom);\n  returnValue.calculatedWidth = Math.ceil(returnValue.availWidth / returnValue.calculatedZoom);\n\n  console.log('AVAIL-H: ' + returnValue.availHeight + '\\nCALC-H: ' + returnValue.calculatedHeight);\n  console.log('AVAIL-W: ' + returnValue.availWidth + '\\nCALC-W: ' + returnValue.calculatedWidth);\n\n  return returnValue;\n};\n\nmodule.exports = getScreenProps;\n","const Utils = {\n  getScreenProps: require('./Utils')\n};\n\nmodule.exports = Utils;\n"],"sourceRoot":""}